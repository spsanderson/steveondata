{
  "hash": "44e31089b4676fcd72b575f0802ea9e5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"How to use the agrep() function in base R\"\nauthor: \"Steven P. Sanderson II, MPH\"\ndate: \"2024-08-29\"\ncategories: [code, rtip, grep, agrep]\ntoc: TRUE\nkeywords: [Programming, R, agrep(), fuzzy matching, string matching, approximate matching, approximate string matching in R, fuzzy matching with agrep(), R string pattern matching, base R text analysis, Levenshtein distance in R, Case-insensitive string matching R, R agrep() syntax and parameters, Fuzzy search in R programming,\nagrep() vs grep() in R, R text data cleaning with agrep()]\n---\n\n\n# Introduction\n\nThe agrep() function in base R is used for approximate string matching, also known as fuzzy matching. Here's how to use it effectively:\n\n# Basic syntax\n\nThe basic syntax of agrep() is as follows:\n\n```r\nagrep(\n  pattern, \n  x, \n  max.distance = 0.1, \n  ignore.case = FALSE, \n  value = FALSE, \n  fixed = TRUE\n  )\n```\n\nWhere:\n\n- pattern: The string pattern you want to match\n- x: The vector of strings to search within\n- max.distance: The maximum allowed distance for a match\n- ignore.case: Whether to ignore case when matching\n- value: Whether to return the matched values instead of indices\n- fixed: Whether to treat the pattern as a fixed string or a regular expression\n\n## Matching behavior\n\nBy default, agrep() returns a vector of indices for the elements that match the pattern. If you set value = TRUE, it will return the matched elements instead.\n\n## Setting the maximum distance\n\nThe max.distance parameter can be set as an integer or a fraction of the pattern length. It determines how different a string can be from the pattern and still be considered a match.\n\n## Case sensitivity\n\nBy default, agrep() is case-sensitive. To make it case-insensitive, set ignore.case = TRUE.\n\n## Examples\n\nHere are some examples of using agrep():\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Basic matching\nagrep(\"lasy\", \"1 lazy 2\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1\n```\n\n\n:::\n\n```{.r .cell-code}\n# Matching with no substitutions allowed\nagrep(\"lasy\", c(\" 1 lazy 2\", \"1 lasy 2\"), max.distance = list(sub = 0))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2\n```\n\n\n:::\n\n```{.r .cell-code}\n# Matching with a maximum distance of 2\nagrep(\"laysy\", c(\"1 lazy\", \"1\", \"1 LAZY\"), max.distance = 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1\n```\n\n\n:::\n\n```{.r .cell-code}\n# Returning matched values instead of indices\nagrep(\"laysy\", c(\"1 lazy\", \"1\", \"1 LAZY\"), max.distance = 2, value = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"1 lazy\"\n```\n\n\n:::\n\n```{.r .cell-code}\n# Case-insensitive matching\nagrep(\"laysy\", c(\"1 lazy\", \"1\", \"1 LAZY\"), max.distance = 2, \n      ignore.case = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 3\n```\n\n\n:::\n\n```{.r .cell-code}\n# Use Regular Expressions\nagrep(\"l[ae]sy\", c(\"1 lazy\", \"1 lesy\", \"1 LAZY\"), max.distance = 1, \n      fixed = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2\n```\n\n\n:::\n:::\n\n\n# Use cases\n\nThe agrep() function is particularly useful for:\n\n- Correcting misspellings in text data\n- Finding similar strings in a dataset\n- Performing fuzzy searches on text fields\n\n# Performance considerations\n\nFor large-scale matching tasks involving millions of patterns and targets, using agrep() directly might be slow. In such cases, you may need to explore more optimized solutions or consider using other packages designed for high-performance string matching.\n\nRemember that while agrep() is powerful for approximate matching, it's important to choose appropriate parameters (especially max.distance) to balance between catching relevant matches and avoiding false positives.\n\n---\n\nHappy Coding! ðŸš€\n\n\n```{=html}\n<script src=\"https://giscus.app/client.js\"\n        data-repo=\"spsanderson/steveondata\"\n        data-repo-id=\"R_kgDOIIxnLw\"\n        data-category=\"Comments\"\n        data-category-id=\"DIC_kwDOIIxnL84ChTk8\"\n        data-mapping=\"url\"\n        data-strict=\"0\"\n        data-reactions-enabled=\"1\"\n        data-emit-metadata=\"0\"\n        data-input-position=\"top\"\n        data-theme=\"dark\"\n        data-lang=\"en\"\n        data-loading=\"lazy\"\n        crossorigin=\"anonymous\"\n        async>\n</script>\n```\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}