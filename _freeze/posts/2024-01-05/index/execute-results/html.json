{
  "hash": "7b29c2ecd2fe4c8f95cd0b93bc27e28c",
  "result": {
    "markdown": "---\ntitle: \"Unveiling the Smooth Operator: Rolling Averages in R\"\nauthor: \"Steven P. Sanderson II, MPH\"\ndate: \"2024-01-05\"\ncategories: [code, rtip, timeseries]\n---\n\n\n# Introduction\n\nEver felt those data points were a bit too jittery? Smoothing out trends and revealing underlying patterns is a breeze with rolling averages in R. Ready to roll? Let's dive in!\n\n# Rolling with the 'zoo'\n\nMeet the 'zoo' package, your trusty companion for time series data wrangling. It's got a handy function called 'rollmean' that handles those rolling averages with ease.\n\n# Installing and Loading\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"zoo\")  # Grab it if you haven't already\nlibrary(zoo)  # Bring it into your workspace\n```\n:::\n\n\n# Example\n\n## Creating a Simple Time Series\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(123)  # Set seed for reproducibility (optional\n# Let's imagine some daily sales data\nsales <- trunc(runif(112, min = 100, max = 500))  # Generate some random sales\ndays <- as.Date(1:112, origin = \"2022-12-31\")  # Add some dates!\ndata_zoo <- zoo(sales, days)  # Convert to a zoo object\n```\n:::\n\n\n## Calculating Rolling Averages\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Say we want a 7-day rolling average:\nrolling_avg7 <- rollmean(data_zoo, k = 7)\nrolling_avg7_left <- rollmean(data_zoo, k = 7, align = \"left\")\nrolling_avg7_right <- rollmean(data_zoo, k = 7, align = \"right\")\n\n# How about a 28-day one?\nrolling_avg28 <- rollmean(data_zoo, k = 28)\nrolling_avg28_left <- rollmean(data_zoo, k = 28, align = \"left\")\nrolling_avg28_right <- rollmean(data_zoo, k = 28, align = \"right\")\n```\n:::\n\n\n## Visualizing the Smoothness\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(data_zoo, type = \"l\", col = \"black\", lwd = 1, ylab = \"Sales\")\nlines(rolling_avg7, col = \"red\", lwd = 2, lty = 2)\nlines(rolling_avg7_left, col = \"green\", lwd = 2, lty = 2)\nlines(rolling_avg7_right, col = \"orange\", lwd = 2, lty = 2)\nlegend(\n  \"bottomleft\", \n  legend = c(\n    \"Original Data\", \"7-day Avg\", \"7-day Avg (left-aligned)\", \n    \"7-day Avg (right-aligned)\"\n    ),\n  col = c(\"black\", \"red\", \"green\", \"orange\"), \n  lwd = 1, lty = 1:2,\n  cex = 0.628\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(data_zoo, type = \"l\", col = \"black\", lwd = 1, ylab = \"Sales\")\nlines(rolling_avg28, col = \"green\", lwd = 2, lty = 2)\nlines(rolling_avg28_left, col = \"steelblue\", lwd = 2, lty = 2)\nlines(rolling_avg28_right, col = \"brown\", lwd = 2, lty = 2)\nlegend(\n  \"bottomleft\", \n  legend = c(\n    \"Original Data\", \"28-day Avg\", \"28-day Avg (left-aligned)\", \n    \"28-day Avg (right-aligned)\"\n    ),\n  col = c(\"black\", \"green\", \"steelblue\", \"brown\"), \n  lwd = 1, lty = 1:2,\n  cex = 0.628\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n# Experimenting and Interpreting\n\nPlay with different 'k' values to see how they affect the smoothness. Remember, larger 'k' means more smoothing, but potential loss of detail.\n\n# Your Turn to Roll!\n\nGrab your data and start exploring rolling averages! It's a powerful tool to uncover hidden patterns and trends. Share your discoveries and join the rolling conversation!\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}