<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Steven P. Sanderson II, MPH">
<meta name="dcterms.date" content="2025-05-05">
<meta name="keywords" content="Programming, return multiple values, R programming, R functions, statistical analysis, data frames, named lists, data processing, error handling, attributes in R, S3 objects, how to return multiple values in R, using attributes in R functions, best practices for R functions, R programming for data analysis, returning values from R functions efficiently">
<meta name="description" content="Discover effective techniques for returning multiple values from functions in R, including using lists, data frames, and attributes. This comprehensive guide covers best practices, practical examples, and common pitfalls, empowering R programmers to enhance their code’s clarity and maintainability. Whether you’re analyzing data or building complex models, learn how to efficiently package and return results in a way that improves usability and performance.">

<title>How to Return Multiple Values from Function in R: A Complete Guide – Steve’s Data Tips and Tricks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JSJCM62KQJ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-JSJCM62KQJ', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="How to Return Multiple Values from Function in R: A Complete Guide – Steve’s Data Tips and Tricks">
<meta property="og:description" content="Discover effective techniques for returning multiple values from functions in R, including using lists, data frames, and attributes. This comprehensive guide covers best practices, practical examples, and common pitfalls, empowering R programmers to enhance their code’s clarity and maintainability. Whether you’re analyzing data or building complex models, learn how to efficiently package and return results in a way that improves usability and performance.">
<meta property="og:site_name" content="Steve's Data Tips and Tricks">
<meta name="twitter:title" content="How to Return Multiple Values from Function in R: A Complete Guide – Steve’s Data Tips and Tricks">
<meta name="twitter:description" content="Discover effective techniques for returning multiple values from functions in R, including using lists, data frames, and attributes. This comprehensive guide covers best practices, practical examples, and common pitfalls, empowering R programmers to enhance their code’s clarity and maintainability. Whether you’re analyzing data or building complex models, learn how to efficiently package and return results in a way that improves usability and performance.">
<meta name="twitter:creator" content="@steveondata">
<meta name="twitter:site" content="@steveondata">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Steve’s Data Tips and Tricks</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/spsanderson"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://t.me/steveondata"> <i class="bi bi-telegram" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="http://feeds.feedburner.com/RBloggers"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.r-bloggers.com/"> <i class="bi bi-book" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.r-users.com/"> <i class="bi bi-briefcase" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">How to Return Multiple Values from Function in R: A Complete Guide</h1>
                  <div>
        <div class="description">
          Discover effective techniques for returning multiple values from functions in R, including using lists, data frames, and attributes. This comprehensive guide covers best practices, practical examples, and common pitfalls, empowering R programmers to enhance their code’s clarity and maintainability. Whether you’re analyzing data or building complex models, learn how to efficiently package and return results in a way that improves usability and performance.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">rtip</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Steven P. Sanderson II, MPH </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 5, 2025</p>
      </div>
    </div>
    
      
    </div>
    

  <div>
    <div class="keywords">
      <div class="block-title">Keywords</div>
      <p>Programming, return multiple values, R programming, R functions, statistical analysis, data frames, named lists, data processing, error handling, attributes in R, S3 objects, how to return multiple values in R, using attributes in R functions, best practices for R functions, R programming for data analysis, returning values from R functions efficiently</p>
    </div>
  </div>
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#understanding-function-returns-in-r" id="toc-understanding-function-returns-in-r" class="nav-link" data-scroll-target="#understanding-function-returns-in-r">Understanding Function Returns in R</a>
  <ul class="collapse">
  <li><a href="#the-single-return-value-rule" id="toc-the-single-return-value-rule" class="nav-link" data-scroll-target="#the-single-return-value-rule">The Single Return Value Rule</a></li>
  <li><a href="#implicit-vs.-explicit-returns" id="toc-implicit-vs.-explicit-returns" class="nav-link" data-scroll-target="#implicit-vs.-explicit-returns">Implicit vs.&nbsp;Explicit Returns</a></li>
  </ul></li>
  <li><a href="#method-1-using-lists-to-return-multiple-values" id="toc-method-1-using-lists-to-return-multiple-values" class="nav-link" data-scroll-target="#method-1-using-lists-to-return-multiple-values">Method 1: Using Lists to Return Multiple Values</a>
  <ul class="collapse">
  <li><a href="#basic-list-example" id="toc-basic-list-example" class="nav-link" data-scroll-target="#basic-list-example">Basic List Example</a></li>
  <li><a href="#why-lists-work-well" id="toc-why-lists-work-well" class="nav-link" data-scroll-target="#why-lists-work-well">Why Lists Work Well</a></li>
  </ul></li>
  <li><a href="#method-2-named-lists-for-enhanced-readability" id="toc-method-2-named-lists-for-enhanced-readability" class="nav-link" data-scroll-target="#method-2-named-lists-for-enhanced-readability">Method 2: Named Lists for Enhanced Readability</a></li>
  <li><a href="#method-3-vectors-for-simple-return-values" id="toc-method-3-vectors-for-simple-return-values" class="nav-link" data-scroll-target="#method-3-vectors-for-simple-return-values">Method 3: Vectors for Simple Return Values</a></li>
  <li><a href="#method-4-data-frames-for-tabular-results" id="toc-method-4-data-frames-for-tabular-results" class="nav-link" data-scroll-target="#method-4-data-frames-for-tabular-results">Method 4: Data Frames for Tabular Results</a></li>
  <li><a href="#method-5-using-environments-advanced" id="toc-method-5-using-environments-advanced" class="nav-link" data-scroll-target="#method-5-using-environments-advanced">Method 5: Using Environments (Advanced)</a></li>
  <li><a href="#method-6-s3-and-s4-objects-for-structured-returns" id="toc-method-6-s3-and-s4-objects-for-structured-returns" class="nav-link" data-scroll-target="#method-6-s3-and-s4-objects-for-structured-returns">Method 6: S3 and S4 Objects for Structured Returns</a>
  <ul class="collapse">
  <li><a href="#s3-objects-example" id="toc-s3-objects-example" class="nav-link" data-scroll-target="#s3-objects-example">S3 Objects Example</a></li>
  </ul></li>
  <li><a href="#method-7-using-attributes-for-additional-information" id="toc-method-7-using-attributes-for-additional-information" class="nav-link" data-scroll-target="#method-7-using-attributes-for-additional-information">Method 7: Using Attributes for Additional Information</a>
  <ul class="collapse">
  <li><a href="#when-to-use-attributes" id="toc-when-to-use-attributes" class="nav-link" data-scroll-target="#when-to-use-attributes">When to Use Attributes</a></li>
  <li><a href="#limitations-of-using-attributes" id="toc-limitations-of-using-attributes" class="nav-link" data-scroll-target="#limitations-of-using-attributes">Limitations of Using Attributes</a></li>
  </ul></li>
  <li><a href="#best-practices-for-returning-multiple-values" id="toc-best-practices-for-returning-multiple-values" class="nav-link" data-scroll-target="#best-practices-for-returning-multiple-values">Best Practices for Returning Multiple Values</a>
  <ul class="collapse">
  <li><a href="#use-named-lists-for-clarity" id="toc-use-named-lists-for-clarity" class="nav-link" data-scroll-target="#use-named-lists-for-clarity">1. Use Named Lists for Clarity</a></li>
  <li><a href="#document-return-values-thoroughly" id="toc-document-return-values-thoroughly" class="nav-link" data-scroll-target="#document-return-values-thoroughly">2. Document Return Values Thoroughly</a></li>
  <li><a href="#use-consistent-return-structures" id="toc-use-consistent-return-structures" class="nav-link" data-scroll-target="#use-consistent-return-structures">3. Use Consistent Return Structures</a></li>
  <li><a href="#match-return-type-to-data-characteristics" id="toc-match-return-type-to-data-characteristics" class="nav-link" data-scroll-target="#match-return-type-to-data-characteristics">4. Match Return Type to Data Characteristics</a></li>
  <li><a href="#error-handling-for-robust-functions" id="toc-error-handling-for-robust-functions" class="nav-link" data-scroll-target="#error-handling-for-robust-functions">5. Error Handling for Robust Functions</a></li>
  </ul></li>
  <li><a href="#performance-comparison-of-return-methods" id="toc-performance-comparison-of-return-methods" class="nav-link" data-scroll-target="#performance-comparison-of-return-methods">Performance Comparison of Return Methods</a>
  <ul class="collapse">
  <li><a href="#memory-usage" id="toc-memory-usage" class="nav-link" data-scroll-target="#memory-usage">Memory Usage</a></li>
  <li><a href="#speed-of-access" id="toc-speed-of-access" class="nav-link" data-scroll-target="#speed-of-access">Speed of Access</a></li>
  </ul></li>
  <li><a href="#practical-example-statistical-analysis-function" id="toc-practical-example-statistical-analysis-function" class="nav-link" data-scroll-target="#practical-example-statistical-analysis-function">Practical Example: Statistical Analysis Function</a></li>
  <li><a href="#practical-example-data-processing-pipeline" id="toc-practical-example-data-processing-pipeline" class="nav-link" data-scroll-target="#practical-example-data-processing-pipeline">Practical Example: Data Processing Pipeline</a></li>
  <li><a href="#your-turn" id="toc-your-turn" class="nav-link" data-scroll-target="#your-turn">Your Turn!</a>
  <ul class="collapse">
  <li><a href="#exercise-create-a-function-for-financial-data-analysis" id="toc-exercise-create-a-function-for-financial-data-analysis" class="nav-link" data-scroll-target="#exercise-create-a-function-for-financial-data-analysis">Exercise: Create a Function for Financial Data Analysis</a></li>
  </ul></li>
  <li><a href="#quick-takeaways-and-key-points" id="toc-quick-takeaways-and-key-points" class="nav-link" data-scroll-target="#quick-takeaways-and-key-points">Quick Takeaways and Key Points</a></li>
  <li><a href="#common-pitfalls-when-returning-multiple-values" id="toc-common-pitfalls-when-returning-multiple-values" class="nav-link" data-scroll-target="#common-pitfalls-when-returning-multiple-values">Common Pitfalls When Returning Multiple Values</a></li>
  <li><a href="#frequently-asked-questions" id="toc-frequently-asked-questions" class="nav-link" data-scroll-target="#frequently-asked-questions">Frequently Asked Questions</a>
  <ul class="collapse">
  <li><a href="#how-do-i-access-individual-values-from-a-function-that-returns-multiple-values" id="toc-how-do-i-access-individual-values-from-a-function-that-returns-multiple-values" class="nav-link" data-scroll-target="#how-do-i-access-individual-values-from-a-function-that-returns-multiple-values">1. How do I access individual values from a function that returns multiple values?</a></li>
  <li><a href="#can-i-return-different-types-of-objects-depending-on-the-functions-logic" id="toc-can-i-return-different-types-of-objects-depending-on-the-functions-logic" class="nav-link" data-scroll-target="#can-i-return-different-types-of-objects-depending-on-the-functions-logic">2. Can I return different types of objects depending on the function’s logic?</a></li>
  <li><a href="#whats-the-most-efficient-way-to-return-multiple-values-in-r" id="toc-whats-the-most-efficient-way-to-return-multiple-values-in-r" class="nav-link" data-scroll-target="#whats-the-most-efficient-way-to-return-multiple-values-in-r">3. What’s the most efficient way to return multiple values in R?</a></li>
  <li><a href="#how-do-i-document-functions-that-return-multiple-values" id="toc-how-do-i-document-functions-that-return-multiple-values" class="nav-link" data-scroll-target="#how-do-i-document-functions-that-return-multiple-values">4. How do I document functions that return multiple values?</a></li>
  <li><a href="#when-should-i-use-s3s4-objects-instead-of-simple-lists-for-returns" id="toc-when-should-i-use-s3s4-objects-instead-of-simple-lists-for-returns" class="nav-link" data-scroll-target="#when-should-i-use-s3s4-objects-instead-of-simple-lists-for-returns">5. When should I use S3/S4 objects instead of simple lists for returns?</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a>
  <ul class="collapse">
  <li><a href="#engage" id="toc-engage" class="nav-link" data-scroll-target="#engage">Engage!</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<blockquote class="blockquote">
<p><strong>Key Takeaway:</strong> R functions can return multiple values through various structures, with named lists being the most flexible and recommended approach. This article covers all techniques with practical examples, best practices, and tips for effective implementation.</p>
</blockquote>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In R programming, functions are essential building blocks that allow for reusable and modular code. However, unlike some other programming languages, R functions can only return a single object. This limitation presents a challenge when you need to return multiple values or results from a function. Fortunately, R provides several elegant ways to work around this constraint, allowing you to effectively return multiple values by packaging them into a single composite object.</p>
<p>Whether you’re performing statistical analysis, data preprocessing, or building complex models, knowing how to properly return multiple values from your functions is crucial for writing clean, efficient, and maintainable code. This article explores the various techniques for returning multiple values in R, complete with real-world examples and best practices.</p>
</section>
<section id="understanding-function-returns-in-r" class="level1">
<h1>Understanding Function Returns in R</h1>
<p>Before diving into specific methods, it’s important to understand how R functions fundamentally handle return values.</p>
<section id="the-single-return-value-rule" class="level2">
<h2 class="anchored" data-anchor-id="the-single-return-value-rule">The Single Return Value Rule</h2>
<p>In R, a function can only return a single object. This is a fundamental aspect of the language. When a function executes, it evaluates all expressions within its body, and the value of the last expression becomes the return value by default.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of implicit return (last expression)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>add_numbers <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  a <span class="sc">+</span> b  <span class="co"># This is implicitly returned</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of explicit return</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>add_numbers_explicit <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(a <span class="sc">+</span> b)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Both functions above achieve the same result, but the second one uses the explicit <code>return()</code> statement. While this rule might seem limiting, R’s rich data structures allow us to package multiple values into a single object, effectively working around this constraint.</p>
</section>
<section id="implicit-vs.-explicit-returns" class="level2">
<h2 class="anchored" data-anchor-id="implicit-vs.-explicit-returns">Implicit vs.&nbsp;Explicit Returns</h2>
<p>R supports two ways of returning values:</p>
<ol type="1">
<li><strong>Implicit return</strong>: The value of the last evaluated expression is automatically returned</li>
<li><strong>Explicit return</strong>: Using the <code>return()</code> function to specify what to return</li>
</ol>
<p>For clarity and readability, especially in complex functions, using explicit <code>return()</code> statements is generally recommended .</p>
</section>
</section>
<section id="method-1-using-lists-to-return-multiple-values" class="level1">
<h1>Method 1: Using Lists to Return Multiple Values</h1>
<p>Lists are the most common and flexible way to return multiple values from a function in R. A list can contain elements of different types and lengths, making it ideal for returning heterogeneous data.</p>
<section id="basic-list-example" class="level2">
<h2 class="anchored" data-anchor-id="basic-list-example">Basic List Example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>calculate_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(numbers) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(numbers)) {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input must be numeric"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  mean_val <span class="ot">&lt;-</span> <span class="fu">mean</span>(numbers)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  median_val <span class="ot">&lt;-</span> <span class="fu">median</span>(numbers)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  std_dev <span class="ot">&lt;-</span> <span class="fu">sd</span>(numbers)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">mean =</span> mean_val, <span class="at">median =</span> median_val, <span class="at">sd =</span> std_dev))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the function</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">calculate_stats</span>(numbers)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing individual results</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results<span class="sc">$</span>mean)    <span class="co"># 20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results<span class="sc">$</span>median)  <span class="co"># 20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results<span class="sc">$</span>sd)      <span class="co"># 7.905694</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.905694</code></pre>
</div>
</div>
<p>In this example, the function <code>calculate_stats()</code> computes three statistical measures and returns them as a named list. The names provide clear labels for each value, making the returned data easy to understand and access.</p>
</section>
<section id="why-lists-work-well" class="level2">
<h2 class="anchored" data-anchor-id="why-lists-work-well">Why Lists Work Well</h2>
<p>Lists are particularly useful for returning multiple values because:</p>
<ul>
<li>They can contain elements of different types (numbers, strings, vectors, even other lists)</li>
<li>Elements can be named for easy access and clarity</li>
<li>They can handle varying lengths of data</li>
<li>They maintain the structure of complex objects</li>
</ul>
</section>
</section>
<section id="method-2-named-lists-for-enhanced-readability" class="level1">
<h1>Method 2: Named Lists for Enhanced Readability</h1>
<p>Building on the basic list approach, using named lists significantly improves code readability and maintenance. Named lists provide clear labels for each returned value, making the function’s output self-documenting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>line_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(line) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  is_question <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">?"</span>, line)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  is_dialogue <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\"</span><span class="st">"</span>, line)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  word_count <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">strsplit</span>(line, <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>)[[<span class="dv">1</span>]])</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">question =</span> is_question,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">dialogue =</span> is_dialogue,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">wc =</span> word_count</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>ex1 <span class="ot">&lt;-</span> <span class="st">"The Voice said, </span><span class="sc">\"</span><span class="st">This is no place as you understand place.</span><span class="sc">\"</span><span class="st">"</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>ex1_stats <span class="ot">&lt;-</span> <span class="fu">line_stats</span>(ex1)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ex1_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$question
[1] FALSE

$dialogue
[1] TRUE

$wc
[1] 11</code></pre>
</div>
</div>
<p>The names in the returned list (<code>question</code>, <code>dialogue</code>, and <code>wc</code>) provide immediate context about what each value represents, making your code much more maintainable.</p>
</section>
<section id="method-3-vectors-for-simple-return-values" class="level1">
<h1>Method 3: Vectors for Simple Return Values</h1>
<p>When all return values are of the same type (e.g., all numeric or all logical), vectors can be a simpler alternative to lists. However, they’re generally less flexible and can be more confusing when returning multiple different values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>calculate_circle_properties <span class="ot">&lt;-</span> <span class="cf">function</span>(radius) {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  area <span class="ot">&lt;-</span> pi <span class="sc">*</span> radius<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  circumference <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> radius</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  diameter <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> radius</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return named vector</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(<span class="at">area =</span> area, <span class="at">circumference =</span> circumference, <span class="at">diameter =</span> diameter))</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>circle_props <span class="ot">&lt;-</span> <span class="fu">calculate_circle_properties</span>(<span class="dv">5</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(circle_props)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         area circumference      diameter 
     78.53982      31.41593      10.00000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(circle_props[<span class="st">"area"</span>])  <span class="co"># Access by name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    area 
78.53982 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(circle_props[<span class="dv">1</span>])       <span class="co"># Access by position</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    area 
78.53982 </code></pre>
</div>
</div>
<p>While vectors can work for simple cases, they have limitations:</p>
<ul>
<li>All elements must be of the same type</li>
<li>They can be less clear than lists for complex return values</li>
<li>Accessing elements by position is error-prone if the function changes</li>
</ul>
</section>
<section id="method-4-data-frames-for-tabular-results" class="level1">
<h1>Method 4: Data Frames for Tabular Results</h1>
<p>When your function processes multiple records or returns data that’s naturally tabular, data frames are an excellent choice. They provide a structured, table-like format that’s ideal for analysis and visualization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>analyze_text <span class="ot">&lt;-</span> <span class="cf">function</span>(sentences) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(sentences)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sentence =</span> sentences,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">char_count =</span> <span class="fu">integer</span>(n),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">word_count =</span> <span class="fu">integer</span>(n),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_question =</span> <span class="fu">logical</span>(n),</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    results<span class="sc">$</span>char_count[i] <span class="ot">&lt;-</span> <span class="fu">nchar</span>(sentences[i])</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    results<span class="sc">$</span>word_count[i] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(sentences[i], <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>)))</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    results<span class="sc">$</span>is_question[i] <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">?$"</span>, sentences[i])</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(results)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>sentences <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"How does this function work?"</span>,</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R makes data analysis easier."</span>,</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Return multiple values efficiently."</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>text_analysis <span class="ot">&lt;-</span> <span class="fu">analyze_text</span>(sentences)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(text_analysis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                             sentence char_count word_count is_question
1        How does this function work?         28          5        TRUE
2       R makes data analysis easier.         29          5       FALSE
3 Return multiple values efficiently.         35          4       FALSE</code></pre>
</div>
</div>
<p>Data frames are particularly useful when:</p>
<ul>
<li>You’re processing multiple records</li>
<li>The output naturally fits a tabular structure</li>
<li>You plan to use the output for further data analysis or visualization</li>
<li>You need to maintain row-column relationships in the data</li>
</ul>
</section>
<section id="method-5-using-environments-advanced" class="level1">
<h1>Method 5: Using Environments (Advanced)</h1>
<p>For more advanced use cases, environments provide another way to return multiple values. Environments in R are containers that store objects, similar to lists, but with different behavior regarding object references.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>create_counter <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">start =</span> <span class="dv">0</span>) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a new environment</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  env <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize counter value</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  env<span class="sc">$</span>value <span class="ot">&lt;-</span> start</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define increment function</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  env<span class="sc">$</span>increment <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">by =</span> <span class="dv">1</span>) {</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    env<span class="sc">$</span>value <span class="ot">&lt;-</span> env<span class="sc">$</span>value <span class="sc">+</span> by</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">invisible</span>(env<span class="sc">$</span>value)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define get function</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  env<span class="sc">$</span>get <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    env<span class="sc">$</span>value</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define reset function</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  env<span class="sc">$</span>reset <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">value =</span> <span class="dv">0</span>) {</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    env<span class="sc">$</span>value <span class="ot">&lt;-</span> value</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">invisible</span>(env<span class="sc">$</span>value)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(env)</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage example</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>counter <span class="ot">&lt;-</span> <span class="fu">create_counter</span>(<span class="dv">10</span>)</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>counter<span class="sc">$</span><span class="fu">increment</span>(<span class="dv">5</span>)</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(counter<span class="sc">$</span><span class="fu">get</span>())  <span class="co"># 15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>counter<span class="sc">$</span><span class="fu">reset</span>()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(counter<span class="sc">$</span><span class="fu">get</span>())  <span class="co"># 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Environments are particularly useful when:</p>
<ul>
<li>You need to maintain state across multiple function calls</li>
<li>You want to implement closures or object-oriented patterns</li>
<li>You need to return functions that share data</li>
</ul>
<p>While powerful, environments are generally considered more advanced and should be used judiciously for specific use cases.</p>
</section>
<section id="method-6-s3-and-s4-objects-for-structured-returns" class="level1">
<h1>Method 6: S3 and S4 Objects for Structured Returns</h1>
<p>For more complex applications, especially when building larger packages or systems, returning S3 or S4 objects can provide a more formal structure to your function outputs.</p>
<section id="s3-objects-example" class="level2">
<h2 class="anchored" data-anchor-id="s3-objects-example">S3 Objects Example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>create_person <span class="ot">&lt;-</span> <span class="cf">function</span>(name, age, occupation) {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  new_person <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> name,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> age,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">occupation =</span> occupation</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Assign S3 class</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>(new_person) <span class="ot">&lt;-</span> <span class="st">"new_person"</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(new_person)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a method for printing person objects</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>print.new_person <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Person:"</span>, x<span class="sc">$</span>name, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Age:"</span>, x<span class="sc">$</span>age, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Occupation:"</span>, x<span class="sc">$</span>occupation, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Create and print a person</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>john <span class="ot">&lt;-</span> <span class="fu">create_person</span>(<span class="st">"John Smith"</span>, <span class="dv">35</span>, <span class="st">"Data Scientist"</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(john)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Person: John Smith 
Age: 35 
Occupation: Data Scientist </code></pre>
</div>
</div>
<p>S3 and S4 objects allow you to:</p>
<ul>
<li>Define specialized behavior through methods</li>
<li>Enforce more structured data organization</li>
<li>Create object-oriented interfaces</li>
<li>Integrate with the broader R ecosystem that uses these systems</li>
</ul>
</section>
</section>
<section id="method-7-using-attributes-for-additional-information" class="level1">
<h1>Method 7: Using Attributes for Additional Information</h1>
<p>Another less conventional way to return additional values from a function is by attaching attributes to the returned object. This method allows you to store extra information with the primary result, although it might not always be as intuitive as the list or data frame approach. Experts on Stack Overflow have noted that setting attributes can be useful in some scenarios.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>calculate_sqrt <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="cn">NaN</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">attr</span>(result, <span class="st">"error"</span>) <span class="ot">&lt;-</span> <span class="st">"Cannot compute square root of negative number"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">attr</span>(result, <span class="st">"input"</span>) <span class="ot">&lt;-</span> x</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(result)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(x)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(result, <span class="st">"original"</span>) <span class="ot">&lt;-</span> x</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(result, <span class="st">"computed_on"</span>) <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the function with positive input</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>pos_result <span class="ot">&lt;-</span> <span class="fu">calculate_sqrt</span>(<span class="dv">16</span>)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pos_result)  <span class="co"># Output: 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4
attr(,"original")
[1] 16
attr(,"computed_on")
[1] "2025-05-05 08:29:58 EDT"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">attr</span>(pos_result, <span class="st">"original"</span>))  <span class="co"># Output: 16</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">attr</span>(pos_result, <span class="st">"computed_on"</span>))  <span class="co"># Output: Current timestamp</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-05-05 08:29:58 EDT"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the function with negative input</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>neg_result <span class="ot">&lt;-</span> <span class="fu">calculate_sqrt</span>(<span class="sc">-</span><span class="dv">4</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(neg_result)  <span class="co"># Output: NaN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN
attr(,"error")
[1] "Cannot compute square root of negative number"
attr(,"input")
[1] -4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">attr</span>(neg_result, <span class="st">"error"</span>))  <span class="co"># Output: "Cannot compute square root of negative number"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Cannot compute square root of negative number"</code></pre>
</div>
</div>
<section id="when-to-use-attributes" class="level2">
<h2 class="anchored" data-anchor-id="when-to-use-attributes">When to Use Attributes</h2>
<p>Attributes can be particularly useful in these scenarios:</p>
<ol type="1">
<li><strong>Adding metadata to results</strong>: When you want to attach information about how or when a result was generated</li>
<li><strong>Preserving original inputs</strong>: To maintain a reference to the input data along with the processed output</li>
<li><strong>Error context</strong>: To provide additional information about errors without disrupting the main return value structure</li>
<li><strong>Extending existing objects</strong>: When you want to add information to an object without changing its base type</li>
</ol>
</section>
<section id="limitations-of-using-attributes" class="level2">
<h2 class="anchored" data-anchor-id="limitations-of-using-attributes">Limitations of Using Attributes</h2>
<p>While attributes can be useful, they come with some drawbacks:</p>
<ol type="1">
<li><strong>Less discoverable</strong>: Users may not know to look for attributes unless properly documented</li>
<li><strong>Can be lost in transformations</strong>: Many R functions strip attributes when transforming objects</li>
<li><strong>Not as standardized</strong>: Unlike lists or data frames, there’s no consistent way to access all attributes at once</li>
<li><strong>Less obvious in debugging</strong>: Attributes don’t always show up in simple print statements</li>
</ol>
<p>If you decide to use attributes, make sure to document them thoroughly so users of your function know to look for them.</p>
</section>
</section>
<section id="best-practices-for-returning-multiple-values" class="level1">
<h1>Best Practices for Returning Multiple Values</h1>
<p>Based on the methods discussed, here are some best practices to follow when returning multiple values from R functions:</p>
<section id="use-named-lists-for-clarity" class="level2">
<h2 class="anchored" data-anchor-id="use-named-lists-for-clarity">1. Use Named Lists for Clarity</h2>
<p>Named lists are generally the best practice for returning multiple values, as they provide clear labels and can handle different data types.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Good practice</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>analyze_data <span class="ot">&lt;-</span> <span class="cf">function</span>(dataset) {</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">summary =</span> <span class="fu">summary</span>(dataset),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(dataset)),</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">dimensions =</span> <span class="fu">dim</span>(dataset)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Less clear</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>analyze_data_poor <span class="ot">&lt;-</span> <span class="cf">function</span>(dataset) {</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>(dataset),</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(<span class="fu">is.na</span>(dataset)),</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dim</span>(dataset)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="document-return-values-thoroughly" class="level2">
<h2 class="anchored" data-anchor-id="document-return-values-thoroughly">2. Document Return Values Thoroughly</h2>
<p>Proper documentation is crucial for functions that return multiple values. Use roxygen2-style comments to describe what each element in the return value represents.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Calculate basic statistics for a numeric vector</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param x A numeric vector</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return A list containing:</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#'   \item{mean}{The arithmetic mean}</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#'   \item{median}{The median value}</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">#'   \item{sd}{The standard deviation}</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">#'   \item{range}{A vector containing the minimum and maximum values}</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' @examples</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">#' basic_stats(c(1, 2, 3, 4, 5))</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>basic_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(x),</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(x),</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(x),</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">range</span>(x)</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="use-consistent-return-structures" class="level2">
<h2 class="anchored" data-anchor-id="use-consistent-return-structures">3. Use Consistent Return Structures</h2>
<p>Maintain consistency in how your functions return multiple values, especially within the same package or project. If you use named lists in one function, use them throughout.</p>
</section>
<section id="match-return-type-to-data-characteristics" class="level2">
<h2 class="anchored" data-anchor-id="match-return-type-to-data-characteristics">4. Match Return Type to Data Characteristics</h2>
<p>Choose your return structure based on what makes the most sense for your data:</p>
<ul>
<li>Use lists for heterogeneous data (different types)</li>
<li>Use data frames for tabular data</li>
<li>Use vectors only when all values are the same type and closely related</li>
<li>Use S3/S4 objects for complex structures requiring specialized methods</li>
</ul>
</section>
<section id="error-handling-for-robust-functions" class="level2">
<h2 class="anchored" data-anchor-id="error-handling-for-robust-functions">5. Error Handling for Robust Functions</h2>
<p>Include proper error handling to ensure your functions fail gracefully and provide meaningful error messages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>calculate_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if input is valid</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(data)) {</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input must be numeric"</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean =</span> <span class="cn">NA</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">median =</span> <span class="cn">NA</span>,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">sd =</span> <span class="cn">NA</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">message =</span> <span class="st">"Empty input provided"</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(data),</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(data),</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(data)</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="fu">calculate_stats</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$mean
[1] 0.1894269

$median
[1] 0.1281316

$sd
[1] 1.070657</code></pre>
</div>
</div>
</section>
</section>
<section id="performance-comparison-of-return-methods" class="level1">
<h1>Performance Comparison of Return Methods</h1>
<p>When choosing a method to return multiple values, performance considerations may come into play, especially for functions that are called frequently or that process large datasets.</p>
<section id="memory-usage" class="level2">
<h2 class="anchored" data-anchor-id="memory-usage">Memory Usage</h2>
<ul>
<li><strong>Lists</strong>: Generally higher memory overhead, especially for small values</li>
<li><strong>Vectors</strong>: More memory-efficient for homogeneous data</li>
<li><strong>Data Frames</strong>: Higher overhead than vectors but optimized for tabular operations</li>
<li><strong>Environments</strong>: Potentially higher overhead due to their reference semantics</li>
</ul>
</section>
<section id="speed-of-access" class="level2">
<h2 class="anchored" data-anchor-id="speed-of-access">Speed of Access</h2>
<ul>
<li><strong>Lists</strong>: Fast access by name, slower by position</li>
<li><strong>Named Vectors</strong>: Similar to lists for named access</li>
<li><strong>Data Frames</strong>: Optimized for column operations, slower for row operations</li>
<li><strong>Environments</strong>: Generally slower for simple access patterns</li>
</ul>
<p>For most cases, the performance differences are negligible compared to the benefits of code clarity and maintainability. Unless you’re working with very large datasets or in performance-critical contexts, prioritize readability and proper design over micro-optimizations.</p>
</section>
</section>
<section id="practical-example-statistical-analysis-function" class="level1">
<h1>Practical Example: Statistical Analysis Function</h1>
<p>Let’s build a practical example that demonstrates good practices for returning multiple values. This function will analyze a dataset and return various statistical metrics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>analyze_dataset <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">column =</span> <span class="cn">NULL</span>) {</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Validate inputs</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.data.frame</span>(data)) {</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input must be a data frame"</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If column is specified, extract that column</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(column)) {</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>(column <span class="sc">%in%</span> <span class="fu">names</span>(data))) {</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">"Specified column not found in data frame"</span>)</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    data_to_analyze <span class="ot">&lt;-</span> data[[column]]</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    col_name <span class="ot">&lt;-</span> column</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">ncol</span>(data) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>      data_to_analyze <span class="ot">&lt;-</span> data[[<span class="dv">1</span>]]</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>      col_name <span class="ot">&lt;-</span> <span class="fu">names</span>(data)[<span class="dv">1</span>]</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">"For multi-column data frames, you must specify a column name"</span>)</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if data is numeric</span></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(data_to_analyze)) {</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Data must be numeric for statistical analysis"</span>)</span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate statistics</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>  basic_stats <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> col_name,</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(data_to_analyze, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(data_to_analyze, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(data_to_analyze, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">range</span>(data_to_analyze, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(data_to_analyze)),</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">length</span>(data_to_analyze)</span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate quantiles</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>  quantiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(data_to_analyze, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create histogram data</span></span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>  hist_data <span class="ot">&lt;-</span> <span class="fu">hist</span>(data_to_analyze, <span class="at">plot =</span> <span class="cn">FALSE</span>)</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return all results in a structured list</span></span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">basic_stats =</span> basic_stats,</span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> quantiles,</span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">histogram =</span> hist_data</span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="dv">10</span>, <span class="at">sd =</span> <span class="dv">2</span>),</span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">sample</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>], <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a>analysis <span class="ot">&lt;-</span> <span class="fu">analyze_dataset</span>(test_data, <span class="st">"value"</span>)</span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(analysis<span class="sc">$</span>basic_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$column
[1] "value"

$mean
[1] 10.18081

$median
[1] 10.12351

$sd
[1] 1.825632

$range
[1]  5.381662 14.374666

$missing
[1] 0

$n
[1] 100</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(analysis<span class="sc">$</span>quantiles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      25%       50%       75% 
 9.012292 10.123513 11.383638 </code></pre>
</div>
</div>
<p>This example demonstrates:</p>
<ul>
<li>Proper input validation</li>
<li>Structured return values using nested lists</li>
<li>Clear naming of return elements</li>
<li>Inclusion of metadata (column name, sample size)</li>
<li>Multiple types of analysis in a single function</li>
</ul>
</section>
<section id="practical-example-data-processing-pipeline" class="level1">
<h1>Practical Example: Data Processing Pipeline</h1>
<p>Here’s another example showing how to return multiple values in a data processing pipeline:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>preprocess_text_data <span class="ot">&lt;-</span> <span class="cf">function</span>(text_vector) {</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.character</span>(text_vector)) {</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Input must be a character vector"</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize results</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(text_vector)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  processed_text <span class="ot">&lt;-</span> <span class="fu">character</span>(n)</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  word_counts <span class="ot">&lt;-</span> <span class="fu">integer</span>(n)</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  stats <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  skipped <span class="ot">&lt;-</span> <span class="fu">integer</span>(<span class="dv">0</span>)</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each text</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">nchar</span>(text_vector[i]) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>      skipped <span class="ot">&lt;-</span> <span class="fu">c</span>(skipped, i)</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>      processed_text[i] <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>      word_counts[i] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">next</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert to lowercase</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>    current <span class="ot">&lt;-</span> <span class="fu">tolower</span>(text_vector[i])</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove punctuation</span></span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>    current <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"[[:punct:]]"</span>, <span class="st">""</span>, current)</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove extra whitespace</span></span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>    current <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>, <span class="st">" "</span>, current)</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>    current <span class="ot">&lt;-</span> <span class="fu">trimws</span>(current)</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store processed text</span></span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>    processed_text[i] <span class="ot">&lt;-</span> current</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count words</span></span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a>    word_counts[i] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">strsplit</span>(current, <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>)))</span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-39"><a href="#cb42-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb42-40"><a href="#cb42-40" aria-hidden="true" tabindex="-1"></a>  stats<span class="sc">$</span>total_documents <span class="ot">&lt;-</span> n</span>
<span id="cb42-41"><a href="#cb42-41" aria-hidden="true" tabindex="-1"></a>  stats<span class="sc">$</span>skipped <span class="ot">&lt;-</span> <span class="fu">length</span>(skipped)</span>
<span id="cb42-42"><a href="#cb42-42" aria-hidden="true" tabindex="-1"></a>  stats<span class="sc">$</span>total_words <span class="ot">&lt;-</span> <span class="fu">sum</span>(word_counts)</span>
<span id="cb42-43"><a href="#cb42-43" aria-hidden="true" tabindex="-1"></a>  stats<span class="sc">$</span>avg_words_per_doc <span class="ot">&lt;-</span> <span class="fu">mean</span>(word_counts)</span>
<span id="cb42-44"><a href="#cb42-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-45"><a href="#cb42-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create data frame of processed documents with metadata</span></span>
<span id="cb42-46"><a href="#cb42-46" aria-hidden="true" tabindex="-1"></a>  results_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb42-47"><a href="#cb42-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">original =</span> text_vector,</span>
<span id="cb42-48"><a href="#cb42-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">processed =</span> processed_text,</span>
<span id="cb42-49"><a href="#cb42-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">word_count =</span> word_counts,</span>
<span id="cb42-50"><a href="#cb42-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb42-51"><a href="#cb42-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-52"><a href="#cb42-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-53"><a href="#cb42-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return all results</span></span>
<span id="cb42-54"><a href="#cb42-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb42-55"><a href="#cb42-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">processed_data =</span> results_df,</span>
<span id="cb42-56"><a href="#cb42-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">stats =</span> stats,</span>
<span id="cb42-57"><a href="#cb42-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">skipped_indices =</span> skipped</span>
<span id="cb42-58"><a href="#cb42-58" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb42-59"><a href="#cb42-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-60"><a href="#cb42-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-61"><a href="#cb42-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb42-62"><a href="#cb42-62" aria-hidden="true" tabindex="-1"></a>sample_texts <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb42-63"><a href="#cb42-63" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The quick brown fox jumps over the lazy dog."</span>,</span>
<span id="cb42-64"><a href="#cb42-64" aria-hidden="true" tabindex="-1"></a>  <span class="st">""</span>,</span>
<span id="cb42-65"><a href="#cb42-65" aria-hidden="true" tabindex="-1"></a>  <span class="st">"R is a powerful language for data analysis!"</span>,</span>
<span id="cb42-66"><a href="#cb42-66" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multiple return values make functions more useful."</span></span>
<span id="cb42-67"><a href="#cb42-67" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-68"><a href="#cb42-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-69"><a href="#cb42-69" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">preprocess_text_data</span>(sample_texts)</span>
<span id="cb42-70"><a href="#cb42-70" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results<span class="sc">$</span>stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$total_documents
[1] 4

$skipped
[1] 1

$total_words
[1] 24

$avg_words_per_doc
[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results<span class="sc">$</span>processed_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                            original
1       The quick brown fox jumps over the lazy dog.
2                                                   
3        R is a powerful language for data analysis!
4 Multiple return values make functions more useful.
                                          processed word_count
1       the quick brown fox jumps over the lazy dog          9
2                                                            0
3        r is a powerful language for data analysis          8
4 multiple return values make functions more useful          7</code></pre>
</div>
</div>
<p>This example shows:</p>
<ul>
<li>A pipeline that processes text data</li>
<li>Returning both the processed data and metadata about the processing</li>
<li>Using a combination of data frame (for the main results) and list (for statistics)</li>
<li>Tracking and returning information about skipped items</li>
</ul>
</section>
<section id="your-turn" class="level1">
<h1>Your Turn!</h1>
<p>Now it’s your time to practice returning multiple values from R functions. Let’s create a function that analyzes a numeric vector and returns various metrics.</p>
<section id="exercise-create-a-function-for-financial-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exercise-create-a-function-for-financial-data-analysis">Exercise: Create a Function for Financial Data Analysis</h2>
<p>Write a function called <code>analyze_returns()</code> that takes a numeric vector representing financial returns (percentages) and returns:</p>
<ol type="1">
<li>Basic statistics (mean, median, standard deviation)</li>
<li>Risk metrics (volatility, maximum drawdown)</li>
<li>A classification of the investment (low, medium, or high risk)</li>
</ol>
<details>
<summary>
Click here for Solution!
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>analyze_returns <span class="ot">&lt;-</span> <span class="cf">function</span>(returns) {</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Validate input</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(returns)) {</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Returns must be a numeric vector"</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(returns) <span class="sc">&lt;</span> <span class="dv">3</span>) {</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Need at least 3 data points for meaningful analysis"</span>)</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate basic statistics</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  basic_stats <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(returns, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">median =</span> <span class="fu">median</span>(returns, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(returns, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate risk metrics</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Annual volatility (assuming daily returns)</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>  volatility <span class="ot">&lt;-</span> <span class="fu">sd</span>(returns, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="dv">252</span>)</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Maximum drawdown</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>  cumulative_returns <span class="ot">&lt;-</span> <span class="fu">cumprod</span>(<span class="dv">1</span> <span class="sc">+</span> returns<span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>  max_drawdown <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">min</span>(cumulative_returns <span class="sc">/</span> <span class="fu">cummax</span>(cumulative_returns)))</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>  risk_metrics <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">volatility =</span> volatility,</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_drawdown =</span> max_drawdown,</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">sharpe_ratio =</span> <span class="cf">if</span>(volatility <span class="sc">&gt;</span> <span class="dv">0</span>) basic_stats<span class="sc">$</span>mean <span class="sc">/</span> volatility <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Classify risk</span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>  risk_class <span class="ot">&lt;-</span> <span class="st">"medium"</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(volatility <span class="sc">&lt;</span> <span class="dv">10</span>) risk_class <span class="ot">&lt;-</span> <span class="st">"low"</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(volatility <span class="sc">&gt;</span> <span class="dv">20</span>) risk_class <span class="ot">&lt;-</span> <span class="st">"high"</span></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return all results</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistics =</span> basic_stats,</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">risk =</span> risk_metrics,</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">classification =</span> risk_class,</span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_observations =</span> <span class="fu">length</span>(returns)</span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Test the function</span></span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>daily_returns <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span> <span class="fl">0.05</span>, <span class="at">sd =</span> <span class="fl">1.2</span>)</span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>analysis <span class="ot">&lt;-</span> <span class="fu">analyze_returns</span>(daily_returns)</span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(analysis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$statistics
$statistics$mean
[1] 0.08901778

$statistics$median
[1] 0.1577561

$statistics$sd
[1] 1.249628


$risk
$risk$volatility
[1] 19.83724

$risk$max_drawdown
[1] 12.71379

$risk$sharpe_ratio
[1] 0.004487409


$classification
[1] "medium"

$n_observations
[1] 100</code></pre>
</div>
</div>
<p>With this function:</p>
<ol type="1">
<li>We validate the input to ensure it’s numeric and has enough data points</li>
<li>We calculate basic statistics and risk metrics</li>
<li>We classify the risk level based on volatility</li>
<li>We return all results in a well-structured list</li>
</ol>
<p>The returned list has clear, descriptive names for each component, making it easy to access specific results:</p>
<pre><code>analysis$statistics$mean      # Mean return
analysis$risk$max_drawdown    # Maximum drawdown
analysis$classification       # Risk classification</code></pre>
</details>
</section>
</section>
<section id="quick-takeaways-and-key-points" class="level1">
<h1>Quick Takeaways and Key Points</h1>
<blockquote class="blockquote">
<p><strong>Key principles for returning multiple values from R functions:</strong></p>
</blockquote>
<ol type="1">
<li><strong>Named lists are the gold standard</strong> for returning multiple heterogeneous values</li>
<li><strong>Data frames excel for tabular data</strong> and multiple observations</li>
<li><strong>Document your return structures thoroughly</strong> to improve code usability</li>
<li><strong>Be consistent in your approach</strong> to returns across related functions</li>
<li><strong>Match the return structure to the data characteristics</strong> (lists for mixed types, data frames for tables)</li>
<li><strong>Include proper error handling</strong> for robust function behavior</li>
<li><strong>Use descriptive names</strong> for all elements in returned objects</li>
<li><strong>Balance complexity and simplicity</strong> - don’t create overly complex return structures</li>
<li><strong>Consider performance only after clarity</strong> - prioritize readability first</li>
<li><strong>Test your functions thoroughly</strong> with edge cases to ensure they behave as expected</li>
</ol>
</section>
<section id="common-pitfalls-when-returning-multiple-values" class="level1">
<h1>Common Pitfalls When Returning Multiple Values</h1>
<p>When returning multiple values from functions in R, there are several common pitfalls to avoid:</p>
<ol type="1">
<li><p><strong>Using unnamed elements</strong>: Always name the elements in lists, vectors, or data frames that you return. Unnamed elements make code harder to understand and maintain.</p></li>
<li><p><strong>Inconsistent return types</strong>: Avoid returning different types of objects depending on the function’s execution path. This creates unpredictable behavior for users of your function.</p></li>
<li><p><strong>Poor documentation</strong>: Failing to document the structure of returned objects makes your functions difficult to use correctly.</p></li>
<li><p><strong>Return structure mismatch</strong>: Choose return structures that match the natural organization of your data. Don’t force tabular data into lists or heterogeneous data into vectors.</p></li>
<li><p><strong>Overcomplicating simple cases</strong>: For functions that return just 2-3 closely related values of the same type, a named vector might be simpler than a list.</p></li>
</ol>
</section>
<section id="frequently-asked-questions" class="level1">
<h1>Frequently Asked Questions</h1>
<section id="how-do-i-access-individual-values-from-a-function-that-returns-multiple-values" class="level2">
<h2 class="anchored" data-anchor-id="how-do-i-access-individual-values-from-a-function-that-returns-multiple-values">1. How do I access individual values from a function that returns multiple values?</h2>
<p>For lists, you can use the <code>$</code> operator or double square brackets:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">my_function</span>()</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>value1 <span class="ot">&lt;-</span> result<span class="sc">$</span>first_value</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>value1 <span class="ot">&lt;-</span> result[[<span class="st">"first_value"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For named vectors:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">my_function</span>()</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>value1 <span class="ot">&lt;-</span> result[<span class="st">"first_value"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For data frames:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">my_function</span>()</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>column1 <span class="ot">&lt;-</span> result<span class="sc">$</span>column_name</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>first_row <span class="ot">&lt;-</span> result[<span class="dv">1</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="can-i-return-different-types-of-objects-depending-on-the-functions-logic" class="level2">
<h2 class="anchored" data-anchor-id="can-i-return-different-types-of-objects-depending-on-the-functions-logic">2. Can I return different types of objects depending on the function’s logic?</h2>
<p>While technically possible, it’s generally not recommended as it makes your code less predictable. If you need conditional behavior, it’s better to:</p>
<ul>
<li>Return a consistent structure with NA or placeholder values</li>
<li>Use a status field to indicate special conditions</li>
<li>Split into separate functions for different return types</li>
</ul>
</section>
<section id="whats-the-most-efficient-way-to-return-multiple-values-in-r" class="level2">
<h2 class="anchored" data-anchor-id="whats-the-most-efficient-way-to-return-multiple-values-in-r">3. What’s the most efficient way to return multiple values in R?</h2>
<p>For small to medium-sized data:</p>
<ul>
<li>Named lists are generally best for heterogeneous data</li>
<li>Vectors for homogeneous data of the same type</li>
<li>Data frames for tabular data</li>
</ul>
<p>For very large datasets, consider specialized structures like data.table or tibble.</p>
</section>
<section id="how-do-i-document-functions-that-return-multiple-values" class="level2">
<h2 class="anchored" data-anchor-id="how-do-i-document-functions-that-return-multiple-values">4. How do I document functions that return multiple values?</h2>
<p>Use roxygen2-style comments to describe each component of your return value:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Calculate statistics for a dataset</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param data A numeric vector</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return A list containing:</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co">#'   \item{mean}{The arithmetic mean of the data}</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co">#'   \item{median}{The median value of the data}</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co">#'   \item{sd}{The standard deviation of the data}</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' @examples</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="co">#' calc_stats(c(1, 2, 3, 4, 5))</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>calc_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Function code...</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="when-should-i-use-s3s4-objects-instead-of-simple-lists-for-returns" class="level2">
<h2 class="anchored" data-anchor-id="when-should-i-use-s3s4-objects-instead-of-simple-lists-for-returns">5. When should I use S3/S4 objects instead of simple lists for returns?</h2>
<p>Consider using S3/S4 objects when:</p>
<ul>
<li>You need specialized behavior (like custom print or plot methods)</li>
<li>You’re building a package with complex data structures</li>
<li>You want to enforce a specific object structure</li>
<li>You’re integrating with other code that expects S3/S4 objects</li>
</ul>
<p>For simpler functions or scripts, lists are usually sufficient and more straightforward.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Returning multiple values from functions is a common requirement in R programming. While R functions can only return a single object, the language provides several elegant solutions for packaging multiple values into a single return object.</p>
<p>Named lists offer the most flexibility and clarity for heterogeneous data, while data frames excel at returning tabular results. For simpler cases with homogeneous data types, named vectors can be a concise option. More advanced applications might benefit from environments or S3/S4 objects.</p>
<p>When designing functions that return multiple values, prioritize clarity, consistency, and proper documentation. Choose your return structure to match your data characteristics, and ensure your functions fail gracefully with informative error messages.</p>
<p>By following the best practices outlined in this article, you can create R functions that return multiple values in a clear, consistent, and maintainable way, enhancing the usability and reliability of your code.</p>
<section id="engage" class="level2">
<h2 class="anchored" data-anchor-id="engage">Engage!</h2>
<p>Have you implemented any of these techniques in your R functions? Which method do you find most useful for your specific needs? Share your experiences in the comments below or on social media using the hashtag #RProgramming. Your insights could help other R programmers solve similar challenges!</p>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ol type="1">
<li><p><a href="https://adv-r.hadley.nz/functions.html">Advanced R: Functions</a> - Hadley Wickham’s comprehensive guide to R functions including return value handling.</p></li>
<li><p><a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/list">R Documentation: Lists</a> - Official R documentation on lists, the most versatile way to return multiple values.</p></li>
<li><p><a href="https://www.burns-stat.com/pages/Tutor/R_inferno.pdf">The R Inferno</a> - Patrick Burns’ guide to R programming pitfalls, including function design considerations.</p></li>
<li><p><a href="https://stackoverflow.com/questions/8936099/returning-multiple-objects-in-an-r-function">Stack Overflow: How to Return Multiple Values in R</a> - Community discussion on multiple return value techniques.</p></li>
<li><p><a href="https://r-pkgs.org/man.html">R Packages - Documentation</a> - Guide to documenting functions with roxygen2 including return value documentation.</p></li>
</ol>
<hr>
<p>Happy Coding! 🚀</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="todays_post.png" class="img-fluid figure-img"></p>
<figcaption>Returning Multiple Values in R</figcaption>
</figure>
</div>
<hr>
<p><em>You can connect with me at any one of the below</em>:</p>
<p><em>Telegram Channel here</em>: <a href="https://t.me/steveondata" class="uri">https://t.me/steveondata</a></p>
<p><em>LinkedIn Network here</em>: <a href="https://www.linkedin.com/in/spsanderson/" class="uri">https://www.linkedin.com/in/spsanderson/</a></p>
<p><em>Mastadon Social here</em>: <a href="https://mstdn.social/@stevensanderson">https://mstdn.social/@stevensanderson</a></p>
<p><em>RStats Network here</em>: <a href="https://rstats.me/@spsanderson">https://rstats.me/@spsanderson</a></p>
<p><em>GitHub Network here</em>: <a href="https://github.com/spsanderson" class="uri">https://github.com/spsanderson</a></p>
<p><em>Bluesky Network here</em>: <a href="https://bsky.app/profile/spsanderson.com" class="uri">https://bsky.app/profile/spsanderson.com</a></p>
<p><em>My Book: Extending Excel with Python and R</em> here: <a href="https://packt.link/oTyZJ" class="uri">https://packt.link/oTyZJ</a></p>
<p><em>You.com Referral Link</em>: <a href="https://you.com/join/EHSLDTL6" class="uri">https://you.com/join/EHSLDTL6</a></p>
<hr>
<script src="https://giscus.app/client.js" data-repo="spsanderson/steveondata" data-repo-id="R_kgDOIIxnLw" data-category="Comments" data-category-id="DIC_kwDOIIxnL84ChTk8" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="dark" data-lang="en" data-loading="lazy" crossorigin="anonymous" async="">
</script>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.spsanderson\.com\/steveondata\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>