<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Steven P. Sanderson II, MPH">
<meta name="dcterms.date" content="2024-10-09">
<meta name="keywords" content="Programming, C programming, include directive, define directive, Header files in C, Symbolic constants in C, Macros in C, Improving C program organization with include, Boosting C program efficiency with define, Best practices for using include and define in C, Debugging include and define issues in C programming">
<meta name="description" content="Unlock the power of #include and #define in C programming. Master header files, symbolic constants, and macros to organize, optimize, and enhance your C code. Beginner-friendly tips and best practices.">

<title>Making Your Programs More Powerful with #include and #define for C – Steve’s Data Tips and Tricks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JSJCM62KQJ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-JSJCM62KQJ', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Making Your Programs More Powerful with #include and #define for C – Steve’s Data Tips and Tricks">
<meta property="og:description" content="Unlock the power of #include and #define in C programming. Master header files, symbolic constants, and macros to organize, optimize, and enhance your C code. Beginner-friendly tips and best practices.">
<meta property="og:site_name" content="Steve's Data Tips and Tricks">
<meta name="twitter:title" content="Making Your Programs More Powerful with #include and #define for C – Steve’s Data Tips and Tricks">
<meta name="twitter:description" content="Unlock the power of #include and #define in C programming. Master header files, symbolic constants, and macros to organize, optimize, and enhance your C code. Beginner-friendly tips and best practices.">
<meta name="twitter:creator" content="@steveondata">
<meta name="twitter:site" content="@steveondata">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Steve’s Data Tips and Tricks</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/spsanderson"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://t.me/steveondata"> <i class="bi bi-telegram" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="http://feeds.feedburner.com/RBloggers"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.r-bloggers.com/"> <i class="bi bi-book" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.r-users.com/"> <i class="bi bi-briefcase" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Making Your Programs More Powerful with #include and #define for C</h1>
                  <div>
        <div class="description">
          Unlock the power of #include and #define in C programming. Master header files, symbolic constants, and macros to organize, optimize, and enhance your C code. Beginner-friendly tips and best practices.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">rtip</div>
                <div class="quarto-category">c</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Steven P. Sanderson II, MPH </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 9, 2024</p>
      </div>
    </div>
    
      
    </div>
    

  <div>
    <div class="keywords">
      <div class="block-title">Keywords</div>
      <p>Programming, C programming, include directive, define directive, Header files in C, Symbolic constants in C, Macros in C, Improving C program organization with include, Boosting C program efficiency with define, Best practices for using include and define in C, Debugging include and define issues in C programming</p>
    </div>
  </div>
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#understanding-include" id="toc-understanding-include" class="nav-link" data-scroll-target="#understanding-include">Understanding #include</a>
  <ul class="collapse">
  <li><a href="#what-is-include" id="toc-what-is-include" class="nav-link" data-scroll-target="#what-is-include">What is #include?</a></li>
  <li><a href="#purpose-of-include" id="toc-purpose-of-include" class="nav-link" data-scroll-target="#purpose-of-include">Purpose of #include</a></li>
  <li><a href="#syntax-and-usage" id="toc-syntax-and-usage" class="nav-link" data-scroll-target="#syntax-and-usage">Syntax and usage</a></li>
  </ul></li>
  <li><a href="#exploring-define" id="toc-exploring-define" class="nav-link" data-scroll-target="#exploring-define">Exploring #define</a>
  <ul class="collapse">
  <li><a href="#what-is-define" id="toc-what-is-define" class="nav-link" data-scroll-target="#what-is-define">What is #define?</a></li>
  <li><a href="#purpose-of-define" id="toc-purpose-of-define" class="nav-link" data-scroll-target="#purpose-of-define">Purpose of #define</a></li>
  <li><a href="#syntax-and-usage-1" id="toc-syntax-and-usage-1" class="nav-link" data-scroll-target="#syntax-and-usage-1">Syntax and usage</a></li>
  </ul></li>
  <li><a href="#benefits-of-using-include" id="toc-benefits-of-using-include" class="nav-link" data-scroll-target="#benefits-of-using-include">Benefits of Using #include</a></li>
  <li><a href="#advantages-of-define" id="toc-advantages-of-define" class="nav-link" data-scroll-target="#advantages-of-define">Advantages of #define</a></li>
  <li><a href="#common-header-files-in-c" id="toc-common-header-files-in-c" class="nav-link" data-scroll-target="#common-header-files-in-c">Common Header Files in C</a></li>
  <li><a href="#best-practices-for-using-include" id="toc-best-practices-for-using-include" class="nav-link" data-scroll-target="#best-practices-for-using-include">Best Practices for Using #include</a></li>
  <li><a href="#tips-for-effective-use-of-define" id="toc-tips-for-effective-use-of-define" class="nav-link" data-scroll-target="#tips-for-effective-use-of-define">Tips for Effective Use of #define</a></li>
  <li><a href="#combining-include-and-define" id="toc-combining-include-and-define" class="nav-link" data-scroll-target="#combining-include-and-define">Combining #include and #define</a></li>
  <li><a href="#common-pitfalls-and-how-to-avoid-them" id="toc-common-pitfalls-and-how-to-avoid-them" class="nav-link" data-scroll-target="#common-pitfalls-and-how-to-avoid-them">Common Pitfalls and How to Avoid Them</a></li>
  <li><a href="#debugging-techniques-for-include-and-define-issues" id="toc-debugging-techniques-for-include-and-define-issues" class="nav-link" data-scroll-target="#debugging-techniques-for-include-and-define-issues">Debugging Techniques for #include and #define Issues</a></li>
  <li><a href="#advanced-topics" id="toc-advanced-topics" class="nav-link" data-scroll-target="#advanced-topics">Advanced Topics</a></li>
  <li><a href="#your-turn" id="toc-your-turn" class="nav-link" data-scroll-target="#your-turn">Your Turn!</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#faqs" id="toc-faqs" class="nav-link" data-scroll-target="#faqs">FAQs</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>C programming is one of the oldest and most influential programming languages, known for its structured programming, recursion, and portability. As a beginner C programmer, you’re about to embark on an exciting journey into a language that has shaped the world of software development. Two essential tools that will make your C programs more powerful and efficient are the <code>#include</code> and <code>#define</code> directives. In this article, we’ll explore how these preprocessor commands can enhance your code and streamline your programming process.</p>
<section id="understanding-include" class="level2">
<h2 class="anchored" data-anchor-id="understanding-include">Understanding #include</h2>
<section id="what-is-include" class="level3">
<h3 class="anchored" data-anchor-id="what-is-include">What is #include?</h3>
<p>The <code>#include</code> directive is a crucial component in C programming that allows you to integrate external files, typically header files, into your program. It’s always placed at the beginning of a C program and acts as a preprocessor command, instructing the compiler to include the contents of the specified file before compilation begins.</p>
</section>
<section id="purpose-of-include" class="level3">
<h3 class="anchored" data-anchor-id="purpose-of-include">Purpose of #include</h3>
<p>The primary purpose of <code>#include</code> is to bring in declarations and definitions from other files, making them available for use in your current program. This is particularly useful for accessing standard library functions, custom functions defined in other files, and shared constants or data structures. These files are best put before the <code>main()</code> part of your program.</p>
</section>
<section id="syntax-and-usage" class="level3">
<h3 class="anchored" data-anchor-id="syntax-and-usage">Syntax and usage</h3>
<p>The basic syntax for using <code>#include</code> is:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;filename.h&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>or</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">"filename.h"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The angle brackets <code>&lt; &gt;</code> are used for system header files, while quotation marks <code>" "</code> are used for user-defined header files.</p>
<p>For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* Your Source File */</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>age <span class="op">=</span> <span class="dv">30</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"You are </span><span class="sc">%d</span><span class="st"> years old.</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> age<span class="op">);</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">"addr.h"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"That's my address"</span><span class="op">);</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* addr.h */</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">1234 Elm Street</span><span class="sc">\n</span><span class="st">);</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"Pittsburgh, PA 15235</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* The Compiler Sees */</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>age <span class="op">=</span> <span class="dv">30</span><span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"You are </span><span class="sc">%d</span><span class="st"> years old.</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> age<span class="op">);</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">1234 Elm Street</span><span class="sc">\n</span><span class="st">);</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"Pittsburgh, PA 15235</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">"That's my address"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="exploring-define" class="level2">
<h2 class="anchored" data-anchor-id="exploring-define">Exploring #define</h2>
<section id="what-is-define" class="level3">
<h3 class="anchored" data-anchor-id="what-is-define">What is #define?</h3>
<p>The <code>#define</code> directive in C is used to declare constant values or expressions with names that can be used repeatedly throughout your program. It’s a powerful tool for creating symbolic constants and macros. Per C Programming Absolute Beginner’s Guide, 3rd Edition, by Perry and Miller, “Constants that you define with <code>#define</code> are not variables, even though they sometimes look like variables when they are used.”.</p>
</section>
<section id="purpose-of-define" class="level3">
<h3 class="anchored" data-anchor-id="purpose-of-define">Purpose of #define</h3>
<p>The main purposes of <code>#define</code> are: 1. To create named constants that improve code readability and maintainability 2. To define macros that can simplify complex operations or repetitive code 3. To enable conditional compilation</p>
</section>
<section id="syntax-and-usage-1" class="level3">
<h3 class="anchored" data-anchor-id="syntax-and-usage-1">Syntax and usage</h3>
<p>The basic syntax for using <code>#define</code> is:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MACRO_NAME value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PI </span><span class="fl">3.14159</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">&gt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="benefits-of-using-include" class="level2">
<h2 class="anchored" data-anchor-id="benefits-of-using-include">Benefits of Using #include</h2>
<ol type="1">
<li><p><strong>Code organization</strong>: <code>#include</code> allows you to separate your code into logical modules, making it easier to manage and maintain large projects.</p></li>
<li><p><strong>Reusability</strong>: By placing commonly used functions or definitions in header files, you can easily reuse them across multiple source files or projects.</p></li>
<li><p><strong>Standard library access</strong>: <code>#include</code> provides access to the wealth of functions and utilities available in the C standard library, such as <code>printf()</code> and <code>scanf()</code>.</p></li>
</ol>
</section>
<section id="advantages-of-define" class="level2">
<h2 class="anchored" data-anchor-id="advantages-of-define">Advantages of #define</h2>
<ol type="1">
<li><p><strong>Creating symbolic constants</strong>: <code>#define</code> allows you to create named constants, improving code readability and making it easier to update values throughout your program.</p></li>
<li><p><strong>Macro definitions</strong>: You can define complex operations as macros, which can be more efficient than function calls in certain situations.</p></li>
<li><p><strong>Improving code readability</strong>: By using meaningful names for constants and macros, you can make your code more self-documenting and easier to understand.</p></li>
</ol>
</section>
<section id="common-header-files-in-c" class="level2">
<h2 class="anchored" data-anchor-id="common-header-files-in-c">Common Header Files in C</h2>
<p>Some frequently used header files in C programming include:</p>
<ol type="1">
<li><code>stdio.h</code>: Provides input/output functions like <code>printf()</code> and <code>scanf()</code></li>
<li><code>stdlib.h</code>: Contains utility functions for memory allocation, random numbers, and more</li>
<li><code>string.h</code>: Offers string manipulation functions</li>
<li><code>math.h</code>: Provides mathematical functions like <code>sin()</code>, <code>cos()</code>, and <code>sqrt()</code></li>
</ol>
</section>
<section id="best-practices-for-using-include" class="level2">
<h2 class="anchored" data-anchor-id="best-practices-for-using-include">Best Practices for Using #include</h2>
<ol type="1">
<li><p><strong>Placing #include directives</strong>: Always place <code>#include</code> directives at the beginning of your source files, after any comments or documentation.</p></li>
<li><p><strong>Avoiding circular dependencies</strong>: Be careful not to create circular dependencies between header files, as this can lead to compilation errors.</p></li>
<li><p><strong>Using include guards</strong>: Implement include guards to prevent multiple inclusions of the same header file:</p></li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef HEADER_FILE_H</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define HEADER_FILE_H</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Header file contents</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="tips-for-effective-use-of-define" class="level2">
<h2 class="anchored" data-anchor-id="tips-for-effective-use-of-define">Tips for Effective Use of #define</h2>
<ol type="1">
<li><p><strong>Naming conventions</strong>: Use uppercase letters for macro names to distinguish them from variables and functions.</p></li>
<li><p><strong>Macro functions</strong>: When defining macro functions, enclose arguments in parentheses to avoid unexpected behavior:</p></li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SQUARE</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">*</span><span class="pp"> </span><span class="op">(</span><span class="pp">x</span><span class="op">))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li><strong>Conditional compilation</strong>: Use <code>#define</code> in combination with <code>#ifdef</code> and <code>#ifndef</code> for conditional compilation:</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define DEBUG</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef DEBUG</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Debugging code</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="combining-include-and-define" class="level2">
<h2 class="anchored" data-anchor-id="combining-include-and-define">Combining #include and #define</h2>
<p>You can create custom header files that contain both <code>#include</code> directives and <code>#define</code> statements. This approach allows you to:</p>
<ol type="1">
<li>Organize related constants and function prototypes together</li>
<li>Share common definitions across multiple source files</li>
<li>Create a modular and maintainable project structure</li>
</ol>
</section>
<section id="common-pitfalls-and-how-to-avoid-them" class="level2">
<h2 class="anchored" data-anchor-id="common-pitfalls-and-how-to-avoid-them">Common Pitfalls and How to Avoid Them</h2>
<ol type="1">
<li><p><strong>Overuse of #define</strong>: While <code>#define</code> is powerful, overusing it can make your code harder to debug. Use <code>const</code> variables for simple constants when possible.</p></li>
<li><p><strong>Forgetting to include necessary headers</strong>: Always include the required headers for the functions you’re using to avoid compilation errors.</p></li>
<li><p><strong>Namespace pollution</strong>: Be cautious when defining macros with common names, as they may conflict with other parts of your code or external libraries.</p></li>
</ol>
</section>
<section id="debugging-techniques-for-include-and-define-issues" class="level2">
<h2 class="anchored" data-anchor-id="debugging-techniques-for-include-and-define-issues">Debugging Techniques for #include and #define Issues</h2>
<ol type="1">
<li><p><strong>Preprocessor output</strong>: Use your compiler’s preprocessor output option to see how <code>#include</code> and <code>#define</code> directives are expanded.</p></li>
<li><p><strong>Common error messages</strong>: Familiarize yourself with error messages related to missing headers or undefined macros.</p></li>
<li><p><strong>Troubleshooting steps</strong>: When encountering issues, check for typos in file names, verify include paths, and ensure all necessary headers are included.</p></li>
</ol>
</section>
<section id="advanced-topics" class="level2">
<h2 class="anchored" data-anchor-id="advanced-topics">Advanced Topics</h2>
<p>As you progress in your C programming journey, you may encounter more advanced uses of <code>#include</code> and <code>#define</code>:</p>
<ol type="1">
<li><p><strong>Predefined macros</strong>: C provides predefined macros like <code>__FILE__</code>, <code>__LINE__</code>, and <code>__DATE__</code> for debugging and informational purposes.</p></li>
<li><p><strong>Variadic macros</strong>: C99 introduced support for macros with a variable number of arguments.</p></li>
<li><p><strong>#ifdef, #ifndef, and conditional compilation</strong>: These directives allow you to include or exclude code based on certain conditions, useful for creating platform-specific code or debugging.</p></li>
</ol>
</section>
<section id="your-turn" class="level2">
<h2 class="anchored" data-anchor-id="your-turn">Your Turn!</h2>
<p>Now that you’ve learned about the power of <code>#include</code> and <code>#define</code> in C programming, it’s time to put your knowledge into practice! Here are some exercises to help you reinforce your understanding:</p>
<ol type="1">
<li><p><strong>Create a Custom Header File</strong> Create a header file named <code>mymath.h</code> that includes the following:</p>
<ul>
<li>A constant <code>PI</code> defined as 3.14159</li>
<li>A macro function <code>SQUARE(x)</code> that calculates the square of a number</li>
<li>A function prototype for <code>int factorial(int n)</code></li>
</ul></li>
<li><p><strong>Use Your Custom Header</strong> Write a C program that includes your <code>mymath.h</code> header and uses the constant, macro, and function you defined. Calculate and print:</p>
<ul>
<li>The area of a circle with radius 5</li>
<li>The square of 7</li>
<li>The factorial of 5</li>
</ul></li>
<li><p><strong>Conditional Compilation</strong> Modify your program to include a debug mode:</p>
<ul>
<li>Define a macro <code>DEBUG</code> at the beginning of your program</li>
<li>Use <code>#ifdef</code> and <code>#endif</code> to include additional print statements that show the intermediate steps of your calculations</li>
<li>Comment out the <code>DEBUG</code> definition and observe how it affects the program’s output</li>
</ul></li>
<li><p><strong>Explore Standard Headers</strong> Write a program that uses functions from at least three different standard library headers (e.g., <code>stdio.h</code>, <code>stdlib.h</code>, <code>string.h</code>, <code>math.h</code>). For each function you use, add a comment explaining what it does.</p></li>
<li><p><strong>Macro Challenge</strong> Create a macro <code>MAX3(a, b, c)</code> that returns the maximum of three numbers. Use this macro in a program to find the largest of three user-input values.</p></li>
</ol>
<p>Remember to compile and run your programs to see the results. If you encounter any errors, try to debug them using the techniques we discussed in the article. Don’t be afraid to experiment and modify the exercises to explore different aspects of <code>#include</code> and <code>#define</code>.</p>
<p>By completing these exercises, you’ll gain hands-on experience with creating and using header files, defining macros, and leveraging the power of the preprocessor in C programming. Good luck, and have fun coding!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="todays_post.PNG" class="img-fluid figure-img"></p>
<figcaption>My Sample Header and Program</figcaption>
</figure>
</div>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Understanding and effectively using <code>#include</code> and <code>#define</code> directives is crucial for writing powerful and maintainable C programs. These tools allow you to organize your code, improve readability, and leverage the full potential of the C language. As you continue to learn and practice, you’ll discover even more ways to harness the power of these preprocessor commands.</p>
<p>Remember, mastering C programming takes time and practice. Don’t be discouraged if you encounter challenges along the way – they’re all part of the learning process. Keep coding, experimenting, and building your skills, and you’ll soon be creating impressive C programs with confidence.</p>
</section>
<section id="faqs" class="level1">
<h1>FAQs</h1>
<ol type="1">
<li><p><strong>Q: Can I use #include to include source (.c) files?</strong> A: While it’s technically possible, it’s generally not recommended. Include header (.h) files instead, and compile source files separately.</p></li>
<li><p><strong>Q: What’s the difference between #define and const?</strong> A: <code>#define</code> is a preprocessor directive that performs text substitution, while <code>const</code> is a keyword that creates a read-only variable with a specific type.</p></li>
<li><p><strong>Q: How many #include statements can I have in a program?</strong> A: There’s no strict limit, but include only what’s necessary to keep compilation times reasonable and avoid potential naming conflicts.</p></li>
<li><p><strong>Q: Can I nest #define statements?</strong> A: Yes, you can nest <code>#define</code> statements, but be cautious as it can make your code harder to read and maintain.</p></li>
<li><p><strong>Q: How do I create my own header file?</strong> A: Create a new file with a .h extension, add your function prototypes, constants, and other declarations, then use include guards to prevent multiple inclusions.</p></li>
</ol>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ol type="1">
<li><p>Learn more about C preprocessor directives <a href="https://www.w3resource.com/c-programming/c-preprocessor-directives.php">https://www.w3resource.com/c-programming/c-preprocessor-directives.php</a></p></li>
<li><p>Explore conditional preprocessor directives <a href="https://codeforwin.org/c-programming/c-preprocessor-directives-include-define-undef-conditional-directives">https://codeforwin.org/c-programming/c-preprocessor-directives-include-define-undef-conditional-directives</a></p></li>
<li><p>Deep dive into the #define preprocessor <a href="https://www.geeksforgeeks.org/c-define-preprocessor/">https://www.geeksforgeeks.org/c-define-preprocessor/</a></p></li>
<li><p>Examples of #include directive usage <a href="https://www.geeksforgeeks.org/c-c-include-directive-with-examples/?ref=header_outind">https://www.geeksforgeeks.org/c-c-include-directive-with-examples/?ref=header_outind</a></p></li>
</ol>
<script src="https://giscus.app/client.js" data-repo="spsanderson/steveondata" data-repo-id="R_kgDOIIxnLw" data-category="Comments" data-category-id="DIC_kwDOIIxnL84ChTk8" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="dark" data-lang="en" data-loading="lazy" crossorigin="anonymous" async="">
</script>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.spsanderson\.com\/steveondata\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>