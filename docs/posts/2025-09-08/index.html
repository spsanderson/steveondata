<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Steven P. Sanderson II, MPH">
<meta name="dcterms.date" content="2025-09-08">
<meta name="keywords" content="Programming, TidyDensity, quantile_normalize(), tidy_mixture_density(), statistical distribution R, R mixture models, quantile normalization algorithm, mixture density combinations, R statistical package update, efficient quantile normalization, mixture model combination types, how to use tidy_mixture_density with combination types in R, performance improvements in quantile_normalize function TidyDensity, breaking changes in TidyDensity 1.5.2 quantile_normalize output, additive and multiplicative mixture models in TidyDensity R package, memory efficient quantile normalization for large datasets in R">
<meta name="description" content="TidyDensity 1.5.2 boosts R workflows with faster quantile_normalize() and flexible tidy_mixture_density() combinations. Upgrade and explore now!">

<title>TidyDensity Update – Steve’s Data Tips and Tricks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-991b1886d3c685c7aa2b62b80640c7af.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-08799928d293638fe9563d5c5a2794e5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-991b1886d3c685c7aa2b62b80640c7af.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JSJCM62KQJ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-JSJCM62KQJ', { 'anonymize_ip': true});
</script>
<meta name="quarto:status" content="draft">


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="TidyDensity Update – Steve’s Data Tips and Tricks">
<meta property="og:description" content="TidyDensity 1.5.2 boosts R workflows with faster quantile_normalize() and flexible tidy_mixture_density() combinations. Upgrade and explore now!">
<meta property="og:image" content="https://www.spsanderson.com/steveondata/posts/2025-09-08/index_files/figure-html/unnamed-chunk-2-1.png">
<meta property="og:site_name" content="Steve's Data Tips and Tricks">
<meta property="og:image:height" content="960">
<meta property="og:image:width" content="1344">
<meta name="twitter:title" content="TidyDensity Update – Steve’s Data Tips and Tricks">
<meta name="twitter:description" content="TidyDensity 1.5.2 boosts R workflows with faster quantile_normalize() and flexible tidy_mixture_density() combinations. Upgrade and explore now!">
<meta name="twitter:image" content="https://www.spsanderson.com/steveondata/posts/2025-09-08/index_files/figure-html/unnamed-chunk-2-1.png">
<meta name="twitter:creator" content="@steveondata">
<meta name="twitter:site" content="@steveondata">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-dark"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = true;
    const darkModeDefault = authorPrefersDark;
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><div id="quarto-draft-alert" class="alert alert-warning"><i class="bi bi-pencil-square"></i>Draft</div>
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Steve’s Data Tips and Tricks</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/spsanderson"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://t.me/steveondata"> <i class="bi bi-telegram" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="http://feeds.feedburner.com/RBloggers"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.r-bloggers.com/"> <i class="bi bi-book" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.r-users.com/"> <i class="bi bi-briefcase" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">TidyDensity Update</h1>
                  <div>
        <div class="description">
          TidyDensity 1.5.2 boosts R workflows with faster quantile_normalize() and flexible tidy_mixture_density() combinations. Upgrade and explore now!
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">rtip</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Steven P. Sanderson II, MPH </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 8, 2025</p>
      </div>
    </div>
    
      
    </div>
    

  <div>
    <div class="keywords">
      <div class="block-title">Keywords</div>
      <p>Programming, TidyDensity, quantile_normalize(), tidy_mixture_density(), statistical distribution R, R mixture models, quantile normalization algorithm, mixture density combinations, R statistical package update, efficient quantile normalization, mixture model combination types, how to use tidy_mixture_density with combination types in R, performance improvements in quantile_normalize function TidyDensity, breaking changes in TidyDensity 1.5.2 quantile_normalize output, additive and multiplicative mixture models in TidyDensity R package, memory efficient quantile normalization for large datasets in R</p>
    </div>
  </div>
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-tidydensity" id="toc-what-is-tidydensity" class="nav-link active" data-scroll-target="#what-is-tidydensity">What is TidyDensity?</a></li>
  <li><a href="#breaking-changes-the-new-quantile_normalize" id="toc-breaking-changes-the-new-quantile_normalize" class="nav-link" data-scroll-target="#breaking-changes-the-new-quantile_normalize">Breaking Changes: The New <code>quantile_normalize()</code></a>
  <ul class="collapse">
  <li><a href="#performance-revolution" id="toc-performance-revolution" class="nav-link" data-scroll-target="#performance-revolution"><strong>Performance Revolution</strong></a></li>
  <li><a href="#technical-implementation" id="toc-technical-implementation" class="nav-link" data-scroll-target="#technical-implementation"><strong>Technical Implementation</strong></a></li>
  <li><a href="#why-breaking-changes-occurred" id="toc-why-breaking-changes-occurred" class="nav-link" data-scroll-target="#why-breaking-changes-occurred"><strong>Why Breaking Changes Occurred</strong></a></li>
  </ul></li>
  <li><a href="#new-features-enhanced-tidy_mixture_density" id="toc-new-features-enhanced-tidy_mixture_density" class="nav-link" data-scroll-target="#new-features-enhanced-tidy_mixture_density">New Features: Enhanced <code>tidy_mixture_density()</code></a>
  <ul class="collapse">
  <li><a href="#flexible-combination-types" id="toc-flexible-combination-types" class="nav-link" data-scroll-target="#flexible-combination-types"><strong>Flexible Combination Types</strong></a></li>
  <li><a href="#practical-examples" id="toc-practical-examples" class="nav-link" data-scroll-target="#practical-examples"><strong>Practical Examples</strong></a></li>
  </ul></li>
  <li><a href="#best-practices-and-recommendations" id="toc-best-practices-and-recommendations" class="nav-link" data-scroll-target="#best-practices-and-recommendations">Best Practices and Recommendations</a>
  <ul class="collapse">
  <li><a href="#for-existing-users" id="toc-for-existing-users" class="nav-link" data-scroll-target="#for-existing-users"><strong>For Existing Users</strong></a></li>
  <li><a href="#for-new-users" id="toc-for-new-users" class="nav-link" data-scroll-target="#for-new-users"><strong>For New Users</strong></a></li>
  </ul></li>
  <li><a href="#looking-forward" id="toc-looking-forward" class="nav-link" data-scroll-target="#looking-forward">Looking Forward</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">






<blockquote class="blockquote">
<p><strong>Key Update:</strong> TidyDensity 1.5.2 delivers significant performance improvements and enhanced mixture modeling capabilities, but introduces breaking changes.</p>
</blockquote>
<p><strong>TidyDensity 1.5.2</strong> has arrived with substantial improvements that will transform how R programmers work with statistical distributions. Released on September 6, 2025, this update brings a fundamentally redesigned <code>quantile_normalize()</code> function and powerful new mixture modeling capabilities through enhanced <code>tidy_mixture_density()</code> functionality . While these changes offer compelling performance benefits, they also introduce breaking changes that require careful consideration for existing workflows.</p>
<hr>
<section id="what-is-tidydensity" class="level1">
<h1>What is TidyDensity?</h1>
<p>TidyDensity is an R package designed to simplify the generation, analysis, and visualization of random numbers from statistical distributions within the tidyverse ecosystem. The package provides a consistent, tidy interface for working with distributional data, making it invaluable for simulation studies, statistical modeling, and exploratory data analysis.</p>
<p><strong>Core capabilities include:</strong></p>
<ul>
<li>Generating tidy random samples from numerous distributions</li>
<li>Creating and analyzing mixture models</li>
<li>Performing quantile normalization for cross-sample comparability</li>
<li>Seamless integration with tidyverse workflows</li>
</ul>
</section>
<section id="breaking-changes-the-new-quantile_normalize" class="level1">
<h1>Breaking Changes: The New <code>quantile_normalize()</code></h1>
<section id="performance-revolution" class="level2">
<h2 class="anchored" data-anchor-id="performance-revolution"><strong>Performance Revolution</strong></h2>
<p>The most significant change in TidyDensity 1.5.2 is the complete redesign of the <code>quantile_normalize()</code> function. This algorithmic overhaul delivers substantial performance improvements.</p>
</section>
<section id="technical-implementation" class="level2">
<h2 class="anchored" data-anchor-id="technical-implementation"><strong>Technical Implementation</strong></h2>
<p>The new algorithm leverages vectorized operations and indexing techniques, moving away from the classical approach that relied on memory-intensive intermediate storage. The redesign focuses on:</p>
<ul>
<li><strong>Reduced redundant sorting operations</strong></li>
<li><strong>In-place memory operations</strong> where possible</li>
<li><strong>Optimized index mapping</strong> for restoring original order</li>
<li><strong>Enhanced algorithmic efficiency</strong> for large datasets</li>
</ul>
</section>
<section id="why-breaking-changes-occurred" class="level2">
<h2 class="anchored" data-anchor-id="why-breaking-changes-occurred"><strong>Why Breaking Changes Occurred</strong></h2>
<p>The algorithmic improvements come with a trade-off: <strong>slightly different numerical outputs</strong>. While the statistical properties remain identical (same quantiles, same normalization effect), the exact element-wise values may differ between versions. The biggest difference is that the function now only returns the normalized data. The old one returned the input data, output data and other intermediate information like duplicate ranks rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(TidyDensity)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Both versions produce identical quantiles</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>), <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>normalized_data <span class="ot">&lt;-</span> <span class="fu">quantile_normalize</span>(data)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(normalized_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            [,1]        [,2]        [,3]        [,4]
[1,]  0.06866241 -0.35677392  0.06866241  0.06866241
[2,]  1.18653497  0.63261543 -0.35677392  0.63261543
[3,] -0.35677392  1.18653497 -1.78199053 -1.78199053
[4,]  0.63261543  0.06866241  1.18653497 -0.35677392
[5,] -1.78199053 -1.78199053  0.63261543  1.18653497</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All columns now share identical quantile distributions</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># But individual elements may differ slightly from v1.5.1</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(normalized_data) <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sapply</span>(<span class="cf">function</span>(x) <span class="fu">quantile</span>(x, <span class="at">probs =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span> <span class="sc">/</span> <span class="dv">4</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              V1          V2          V3          V4
0%   -1.78199053 -1.78199053 -1.78199053 -1.78199053
25%  -0.35677392 -0.35677392 -0.35677392 -0.35677392
50%   0.06866241  0.06866241  0.06866241  0.06866241
75%   0.63261543  0.63261543  0.63261543  0.63261543
100%  1.18653497  1.18653497  1.18653497  1.18653497</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return in tibble format</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile_normalize</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">rand_norm_1 =</span> <span class="fu">rnorm</span>(<span class="dv">30</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">rand_norm_b =</span> <span class="fu">rnorm</span>(<span class="dv">30</span>)),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">.return_tibble =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 2
   rand_norm_1 rand_norm_b
         &lt;dbl&gt;       &lt;dbl&gt;
 1     -1.63       -0.291 
 2      1.12       -1.38  
 3      0.429       0.0444
 4      0.452       2.51  
 5     -1.26       -0.149 
 6     -1.38       -0.844 
 7      0.0444      0.973 
 8     -0.844       1.38  
 9     -0.345       0.249 
10      0.262       0.262 
# ℹ 20 more rows</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Important:</strong> The quantile normalization properties are perfectly preserved - all columns have identical quantiles after processing. Only the specific element arrangements differ.</p>
</blockquote>
</section>
</section>
<section id="new-features-enhanced-tidy_mixture_density" class="level1">
<h1>New Features: Enhanced <code>tidy_mixture_density()</code></h1>
<section id="flexible-combination-types" class="level2">
<h2 class="anchored" data-anchor-id="flexible-combination-types"><strong>Flexible Combination Types</strong></h2>
<p>TidyDensity 1.5.2 introduces a powerful <code>.combination_type</code> parameter to <code>tidy_mixture_density()</code>, enabling five different ways to combine distributions :</p>
<table class="caption-top table">
<colgroup>
<col style="width: 42%">
<col style="width: 32%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Combination Type</th>
<th>Description</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>stack</strong></td>
<td>Concatenate all data points (default)</td>
<td>Traditional mixture models</td>
</tr>
<tr class="even">
<td><strong>add</strong></td>
<td>Element-wise addition</td>
<td>Additive effects modeling</td>
</tr>
<tr class="odd">
<td><strong>subtract</strong></td>
<td>Element-wise subtraction</td>
<td>Difference analysis</td>
</tr>
<tr class="even">
<td><strong>multiply</strong></td>
<td>Element-wise multiplication</td>
<td>Interaction effects</td>
</tr>
<tr class="odd">
<td><strong>divide</strong></td>
<td>Element-wise division</td>
<td>Ratio analysis</td>
</tr>
</tbody>
</table>
</section>
<section id="practical-examples" class="level2">
<h2 class="anchored" data-anchor-id="practical-examples"><strong>Practical Examples</strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Traditional mixture model (default behavior)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>mix_stack <span class="ot">&lt;-</span> <span class="fu">tidy_mixture_density</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">1</span>), </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_normal</span>(<span class="at">.mean =</span> <span class="dv">5</span>, <span class="at">.sd =</span> <span class="dv">1</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">.combination_type =</span> <span class="st">"stack"</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>mix_stack</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
$data$dist_tbl
# A tibble: 150 × 2
       x        y
   &lt;int&gt;    &lt;dbl&gt;
 1     1 -1.77   
 2     2 -0.00158
 3     3 -1.18   
 4     4 -1.49   
 5     5  1.18   
 6     6 -0.137  
 7     7 -0.366  
 8     8  1.44   
 9     9  0.282  
10    10 -1.31   
# ℹ 140 more rows

$data$dens_tbl
# A tibble: 150 × 2
       x        y
   &lt;dbl&gt;    &lt;dbl&gt;
 1 -5.03 0.000100
 2 -4.93 0.000145
 3 -4.83 0.000208
 4 -4.73 0.000294
 5 -4.63 0.000411
 6 -4.53 0.000569
 7 -4.43 0.000776
 8 -4.32 0.00105 
 9 -4.22 0.00140 
10 -4.12 0.00185 
# ℹ 140 more rows

$data$input_data
$data$input_data$`rnorm(100, 0, 1)`
  [1] -1.766829111 -0.001577413 -1.178492821 -1.493232849  1.179401444
  [6] -0.136552242 -0.366194052  1.442100860  0.282442623 -1.312541526
 [11] -0.852863724  2.461186917 -1.255689685  1.351405235  0.051003540
 [16] -0.173590062 -0.298433358 -0.416851873  1.181307649 -0.142343289
 [21] -0.184107563  1.884693706  0.156933569 -0.653497700  1.169518600
 [26]  0.365207764 -2.181619538 -0.615047355  0.529372656 -1.305527606
 [31] -0.437365304 -1.537967010 -2.050998778 -0.896782026  0.924003678
 [36]  0.338310657  0.194294278  0.178387764  0.247738175  0.918057255
 [41]  0.067069726 -1.060474508 -0.822298105 -0.759301022 -0.582583144
 [46] -0.912265578 -1.782023112 -0.716916547 -0.819488290  0.569099376
 [51]  0.718618758  0.063467637  0.540811711  0.861932136  0.114822942
 [56] -0.192775385  0.848141977 -0.662615723 -0.097830649 -0.125956740
 [61] -2.362393851  2.285996884 -0.399814468 -0.916488166 -0.754424554
 [66]  0.512714313  0.625081280 -1.727363923 -0.307532421  1.330215374
 [71] -0.339978087 -1.195863296  1.259142128  0.088349373 -0.283655078
 [76] -1.655362238 -1.082846600  1.186826303 -0.413490399  0.916470257
 [81]  0.446433507 -0.206714232 -0.223255959 -1.665263456  0.165397683
 [86] -2.421900207  0.185896733 -0.436873486 -0.862857765 -1.336973854
 [91] -0.229902444  1.565091420  0.506254713  0.044036495 -0.737263480
 [96]  0.113293914  0.746154228  1.913277036  0.009332742 -1.395834122

$data$input_data$`tidy_normal(.mean = 5, .sd = 1)`
# A tibble: 50 × 7
   sim_number     x     y    dx       dy      p     q
   &lt;fct&gt;      &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 1              1  5.80  1.75 0.000243 0.789   5.80
 2 1              2  2.85  1.89 0.000701 0.0159  2.85
 3 1              3  7.42  2.03 0.00176  0.992   7.42
 4 1              4  4.73  2.16 0.00387  0.392   4.73
 5 1              5  5.63  2.30 0.00746  0.734   5.63
 6 1              6  3.94  2.44 0.0127   0.145   3.94
 7 1              7  3.40  2.58 0.0196   0.0546  3.40
 8 1              8  4.95  2.72 0.0278   0.481   4.95
 9 1              9  6.24  2.86 0.0378   0.892   6.24
10 1             10  5.89  2.99 0.0507   0.814   5.89
# ℹ 40 more rows



$plots
$plots$line_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$plots$dens_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

$input_fns
[1] "rnorm(100, 0, 1), tidy_normal(.mean = 5, .sd = 1)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Additive mixture for modeling combined effects</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>mix_additive <span class="ot">&lt;-</span> <span class="fu">tidy_mixture_density</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rnorm</span>(<span class="dv">50</span>), </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbeta</span>(<span class="dv">50</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>), </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">.combination_type =</span> <span class="st">"add"</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>mix_additive</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
$data$dist_tbl
# A tibble: 50 × 2
       x      y
   &lt;int&gt;  &lt;dbl&gt;
 1     1  0.659
 2     2  0.625
 3     3 -0.469
 4     4  0.338
 5     5  2.08 
 6     6  1.22 
 7     7  0.399
 8     8 -1.32 
 9     9  0.979
10    10 -0.357
# ℹ 40 more rows

$data$dens_tbl
# A tibble: 50 × 2
       x        y
   &lt;dbl&gt;    &lt;dbl&gt;
 1 -2.67 0.000298
 2 -2.53 0.00107 
 3 -2.39 0.00316 
 4 -2.25 0.00777 
 5 -2.11 0.0160  
 6 -1.97 0.0280  
 7 -1.83 0.0425  
 8 -1.69 0.0568  
 9 -1.55 0.0683  
10 -1.41 0.0768  
# ℹ 40 more rows

$data$input_data
$data$input_data$`rnorm(50)`
 [1]  0.64002882 -0.20466397 -1.08412848  0.08169471  1.25951582  0.26659683
 [7] -0.14015944 -1.59796409 -0.01950626 -0.37619737  0.88311475  0.25195748
[13] -0.05267864 -0.30372381  0.23412768  0.01663383 -0.47053409 -0.03347576
[19] -0.32910072  1.99717876 -0.83581662  0.08632286 -0.83911639  0.18361690
[25]  0.46606368  1.33369300  0.57659361  0.70566226 -0.71600678  0.85118352
[31] -0.59004117 -0.82636900 -0.87469364 -1.46654456  1.23031951  0.20008767
[37]  0.27092660 -0.70856140 -1.42087054  0.08032003  0.42542302  2.85350542
[43] -1.97646652  1.22021849  0.22281015 -0.48879907  0.62344750 -0.16936613
[49] -0.43156064  1.91449276

$data$input_data$`rbeta(50, 0.5, 0.5)`
 [1] 0.019101467 0.829434733 0.615010897 0.256198562 0.823804906 0.950593184
 [7] 0.539136850 0.274558863 0.998957717 0.018718681 0.288329288 0.105604566
[13] 0.944753533 0.761960437 0.733235897 0.364617328 0.893007480 0.929076696
[19] 0.962238739 0.082129180 0.142483446 0.997821628 0.339750082 0.042418540
[25] 0.695594337 0.884661519 0.614079978 0.164464745 0.010730865 0.938254152
[31] 0.110143559 0.040660986 0.160080871 0.773844817 0.007160841 0.029508283
[37] 0.035195423 0.951451349 0.003636615 0.999999958 0.923360786 0.417910285
[43] 0.230525073 0.756847419 0.276770995 0.760927568 0.691560433 0.986649422
[49] 0.578138289 0.545930502



$plots
$plots$line_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$plots$dens_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

$input_fns
[1] "rnorm(50), rbeta(50, 0.5, 0.5)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiplicative interactions</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>mix_multiplicative <span class="ot">&lt;-</span> <span class="fu">tidy_mixture_density</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rnorm</span>(<span class="dv">50</span>), </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbeta</span>(<span class="dv">50</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>), </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">.combination_type =</span> <span class="st">"multiply"</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>mix_multiplicative</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
$data$dist_tbl
# A tibble: 50 × 2
       x       y
   &lt;int&gt;   &lt;dbl&gt;
 1     1  0.0255
 2     2 -0.664 
 3     3  0.232 
 4     4 -0.432 
 5     5  0.427 
 6     6 -0.0692
 7     7 -0.552 
 8     8  0.0532
 9     9  0.726 
10    10 -0.0146
# ℹ 40 more rows

$data$dens_tbl
# A tibble: 50 × 2
       x        y
   &lt;dbl&gt;    &lt;dbl&gt;
 1 -1.84 0.000689
 2 -1.75 0.00402 
 3 -1.67 0.0154  
 4 -1.58 0.0399  
 5 -1.50 0.0720  
 6 -1.41 0.0963  
 7 -1.33 0.103   
 8 -1.24 0.0959  
 9 -1.16 0.0881  
10 -1.07 0.0852  
# ℹ 40 more rows

$data$input_data
$data$input_data$`rnorm(50)`
 [1]  0.05550680 -0.73957775  0.24211795 -0.47063762  1.01810637 -0.57694372
 [7] -0.67678047  0.93765912  0.75397073 -0.64736416  0.58904405  0.73543871
[13]  0.64164932 -0.80467213 -0.73735297 -1.09302015 -0.05705617  0.20795199
[19] -0.78463922 -0.77925389 -0.17043314  0.62728206  0.83454845 -0.25435436
[25] -1.40999800 -1.50556493  1.28866223 -1.45374667  1.95373615  1.42690477
[31] -1.36144184 -0.53048371 -1.25610242 -0.40800680  1.48535407 -0.62467337
[37] -0.66832897 -0.07796154  0.99749354 -0.04458126  0.47326725  0.14370158
[43] -0.22434151 -0.86191451  0.08792836 -0.52966022  0.76010966 -1.32418372
[49] -1.45052377 -0.69837645

$data$input_data$`rbeta(50, 0.5, 0.5)`
 [1] 0.459989501 0.897719666 0.959162543 0.916867422 0.419257972 0.120020856
 [7] 0.814921679 0.056764216 0.963483978 0.022553266 0.137552203 0.020200703
[13] 0.846458974 0.032100246 0.008915379 0.022133408 0.050263478 0.669838922
[19] 0.343958210 0.082415416 0.232497210 0.250046344 0.468269206 0.808797163
[25] 0.907721517 0.079553304 0.011963768 0.120359152 0.998771739 0.028866829
[31] 0.271197894 0.999099932 0.832345153 0.052000542 0.310408313 0.722520224
[37] 0.574606063 0.222357320 0.719205213 0.187224799 0.375353409 0.537091618
[43] 0.274557660 0.924873370 0.384379505 0.698651846 0.792157780 0.420828001
[49] 0.998844519 0.141227023



$plots
$plots$line_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$plots$dens_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

$input_fns
[1] "rnorm(50), rbeta(50, 0.5, 0.5)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subtration for differencing</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>mix_subtract <span class="ot">&lt;-</span> <span class="fu">tidy_mixture_density</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rnorm</span>(<span class="dv">50</span>),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rbeta</span>(<span class="dv">50</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">.combination_type =</span> <span class="st">"subtract"</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>mix_subtract</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
$data$dist_tbl
# A tibble: 50 × 2
       x      y
   &lt;int&gt;  &lt;dbl&gt;
 1     1  1.17 
 2     2 -1.07 
 3     3  0.687
 4     4 -0.691
 5     5 -0.185
 6     6  1.27 
 7     7  0.997
 8     8 -0.838
 9     9  0.118
10    10 -1.02 
# ℹ 40 more rows

$data$dens_tbl
# A tibble: 50 × 2
       x        y
   &lt;dbl&gt;    &lt;dbl&gt;
 1 -3.92 0.000224
 2 -3.77 0.000613
 3 -3.61 0.00150 
 4 -3.45 0.00331 
 5 -3.30 0.00657 
 6 -3.14 0.0118  
 7 -2.98 0.0193  
 8 -2.83 0.0288  
 9 -2.67 0.0398  
10 -2.51 0.0517  
# ℹ 40 more rows

$data$input_data
$data$input_data$`rnorm(50)`
 [1]  1.19962043 -0.57888987  0.99588480 -0.42561635 -0.12469825  1.94795504
 [7]  1.01739556 -0.67336766  0.56534141 -0.16850478 -0.50427817 -1.19123618
[13] -0.28736204 -0.73278101  0.81013434 -0.05984913  1.45364857  2.35385081
[19]  0.38913872  2.39605136  0.33760388 -0.59735330 -1.55414776  0.69745330
[25] -0.10728837 -0.60125297 -0.55548902  0.82524453 -0.33577416  0.76031588
[31] -0.87906964  0.17843147  0.77417784 -0.43380165  0.16629463  1.48945267
[37] -1.32662246  0.37509426  2.62805756 -0.20283584 -0.10946159 -0.47051182
[43]  1.42200438  0.72551319 -1.26994909 -0.96204533  0.80861918  0.60730261
[49]  0.92977462  0.36243766

$data$input_data$`rbeta(50, 0.5, 0.5)`
 [1] 3.320658e-02 4.931625e-01 3.085177e-01 2.649137e-01 6.079749e-02
 [6] 6.753533e-01 2.054485e-02 1.646166e-01 4.475261e-01 8.516545e-01
[11] 6.181552e-01 8.768765e-01 7.815270e-01 5.120221e-01 8.256367e-01
[16] 2.378842e-02 1.900617e-01 9.854376e-02 9.666278e-01 1.006239e-02
[21] 5.175945e-01 8.076737e-01 9.995612e-01 1.236876e-03 8.849930e-01
[26] 6.779638e-01 1.155130e-01 1.888812e-01 8.175208e-01 2.727907e-01
[31] 6.210494e-01 6.178416e-01 2.665732e-01 1.867798e-05 7.188300e-02
[36] 5.600232e-01 3.602573e-01 5.108425e-01 9.676047e-01 9.624691e-01
[41] 7.873475e-01 7.058064e-01 6.387451e-01 7.769787e-01 9.985657e-01
[46] 2.144238e-01 1.968098e-01 4.188737e-01 9.885930e-01 7.238703e-01



$plots
$plots$line_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$plots$dens_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

$input_fns
[1] "rnorm(50), rbeta(50, 0.5, 0.5)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Division for ratios</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>mix_divide <span class="ot">&lt;-</span> <span class="fu">tidy_mixture_density</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rnorm</span>(<span class="dv">50</span>),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rbeta</span>(<span class="dv">50</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">.combination_type =</span> <span class="st">"divide"</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>mix_divide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$data
$data$dist_tbl
# A tibble: 50 × 2
       x        y
   &lt;int&gt;    &lt;dbl&gt;
 1     1   -1.89 
 2     2   -1.61 
 3     3   -0.342
 4     4    3.91 
 5     5 -109.   
 6     6   -4.53 
 7     7    4.34 
 8     8   -2.59 
 9     9   -0.527
10    10    1.20 
# ℹ 40 more rows

$data$dens_tbl
# A tibble: 50 × 2
         x        y
     &lt;dbl&gt;    &lt;dbl&gt;
 1 -217.   9.71e- 4
 2 -162.   3.10e-19
 3 -106.   2.58e- 3
 4  -51.0  4.94e- 6
 5    4.47 5.01e- 2
 6   59.9  0       
 7  115.   8.11e-19
 8  171.   0       
 9  226.   3.64e-19
10  282.   0       
# ℹ 40 more rows

$data$input_data
$data$input_data$`rnorm(50)`
 [1] -0.67434774 -0.41640227 -0.33056076  0.50418947 -0.49569911 -0.19714638
 [7]  0.62911438 -0.25208985 -0.28429884  0.87128616  0.04552308 -0.92336825
[13] -1.06676252 -1.14451933  1.25418883 -0.47171739 -2.14651360  1.40019111
[19]  1.44266096  0.34925751  0.96780255 -0.20394629  0.66732820 -0.42401426
[25] -0.55073119  1.83805663  0.07612659  0.44148603 -0.34388841  0.56984924
[31]  0.84808863  1.02676486  1.23227319 -0.27654397 -0.83536079 -0.35191077
[37]  0.14941936 -0.32109298 -0.68759167  0.26367100  1.93383309  0.11563717
[43]  1.19555680 -0.37898119 -0.47424511  0.20023218 -0.05133569 -1.49215816
[49] -1.49012727 -0.81971639

$data$input_data$`rbeta(50, 0.5, 0.5)`
 [1] 0.3561889546 0.2592355323 0.9652971630 0.1290211662 0.0045523389
 [6] 0.0435672975 0.1450874915 0.0974180416 0.5392951677 0.7270452756
[11] 0.4172862480 0.0590653102 0.0172042950 0.2701376540 0.4739325282
[16] 0.6725582337 0.0899560278 0.9279949757 0.0864184795 0.0982149311
[21] 0.0003879297 0.9376583960 0.1061609111 0.0458795367 0.2754374071
[26] 0.9370755984 0.7706390918 0.9934705501 0.4998920960 0.4267544509
[31] 0.3988987041 0.0123318084 0.1401412794 0.0116091191 0.1337998030
[36] 0.3955542371 0.1886695451 0.9330449459 0.3674830383 0.1840311330
[41] 0.5927435116 0.3322709147 0.7660757982 0.0192189855 0.9761053192
[46] 0.8824886022 0.0029632913 0.3363661120 0.0070162364 0.8091333504



$plots
$plots$line_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$plots$dens_plot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-2-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

$input_fns
[1] "rnorm(50), rbeta(50, 0.5, 0.5)"</code></pre>
</div>
</div>
<p>Each combination returns comprehensive output including:</p>
<ul>
<li><strong>Tidy data tables</strong> with combined distributions</li>
<li><strong>Density estimates</strong> for visualization</li>
<li><strong>Ready-to-use plots</strong> for immediate analysis</li>
<li><strong>Input function metadata</strong> for reproducibility</li>
</ul>
</section>
</section>
<section id="best-practices-and-recommendations" class="level1">
<h1>Best Practices and Recommendations</h1>
<section id="for-existing-users" class="level2">
<h2 class="anchored" data-anchor-id="for-existing-users"><strong>For Existing Users</strong></h2>
<ul>
<li><strong>Gradually migrate</strong> critical workflows after thorough testing</li>
<li><strong>Document any code</strong> that depends on exact quantile_normalize() outputs</li>
<li><strong>Leverage new mixture modeling</strong> for more sophisticated statistical modeling</li>
<li><strong>Test downstream analyses</strong> to ensure compatibility</li>
</ul>
</section>
<section id="for-new-users" class="level2">
<h2 class="anchored" data-anchor-id="for-new-users"><strong>For New Users</strong></h2>
<ul>
<li><strong>Start with v1.5.2</strong> to benefit from performance improvements immediately</li>
<li><strong>Explore mixture modeling capabilities</strong> for creative statistical applications</li>
<li><strong>Use in tidyverse pipelines</strong> for seamless data science workflows</li>
</ul>
</section>
</section>
<section id="looking-forward" class="level1">
<h1>Looking Forward</h1>
<p>TidyDensity 1.5.2 represents a significant evolution in the package’s capabilities. The performance improvements in <code>quantile_normalize()</code> make it more suitable for large-scale data science applications, while the enhanced <code>tidy_mixture_density()</code> opens new possibilities for sophisticated statistical modeling.</p>
<p>The breaking changes, though initially challenging, position the package for better scalability and more efficient memory usage, crucial factors for modern data science workflows.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p><strong>TidyDensity 1.5.2</strong> delivers substantial improvements that will benefit R programmers working with statistical distributions. The 48.6% performance improvement in <code>quantile_normalize()</code> and flexible mixture modeling capabilities make this update highly valuable, despite the breaking changes.</p>
<p><strong>Key takeaways:</strong></p>
<ul>
<li>✅ Significant performance gains across all dataset sizes</li>
<li>✅ Enhanced mixture modeling with five combination types</li>
<li>✅ Preserved statistical properties in quantile normalization</li>
<li>⚠️ Breaking changes require testing of existing workflows</li>
<li>🚀 Improved scalability for large-scale data science applications</li>
</ul>
<p><strong>Ready to upgrade?</strong> Update to TidyDensity 1.5.2 and test your critical workflows to ensure compatibility. The performance benefits and new capabilities make this update well worth the migration effort.</p>
<blockquote class="blockquote">
<p>💡 <strong>What’s your experience with TidyDensity 1.5.2?</strong></p>
</blockquote>
<hr>
<p>Happy Coding! 🚀</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="todays_post.png" class="img-fluid figure-img"></p>
<figcaption>TidyDensity Update</figcaption>
</figure>
</div>
<hr>
<p><em>You can connect with me at any one of the below</em>:</p>
<p><em>Telegram Channel here</em>: <a href="https://t.me/steveondata">https://t.me/steveondata</a></p>
<p><em>LinkedIn Network here</em>: <a href="https://www.linkedin.com/in/spsanderson/">https://www.linkedin.com/in/spsanderson/</a></p>
<p><em>Mastadon Social here</em>: <a href="https://mstdn.social/@stevensanderson">https://mstdn.social/<span class="citation" data-cites="stevensanderson">@stevensanderson</span></a></p>
<p><em>RStats Network here</em>: <a href="https://rstats.me/@spsanderson">https://rstats.me/<span class="citation" data-cites="spsanderson">@spsanderson</span></a></p>
<p><em>GitHub Network here</em>: <a href="https://github.com/spsanderson">https://github.com/spsanderson</a></p>
<p><em>Bluesky Network here</em>: <a href="https://bsky.app/profile/spsanderson.com">https://bsky.app/profile/spsanderson.com</a></p>
<p><em>My Book: <em>Extending Excel with Python and R</em> here</em>: <a href="https://packt.link/oTyZJ">https://packt.link/oTyZJ</a></p>
<p><em>You.com Referral Link</em>: <a href="https://you.com/join/EHSLDTL6">https://you.com/join/EHSLDTL6</a></p>
<hr>
<script src="https://giscus.app/client.js" data-repo="spsanderson/steveondata" data-repo-id="R_kgDOIIxnLw" data-category="Comments" data-category-id="DIC_kwDOIIxnL84ChTk8" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="dark" data-lang="en" data-loading="lazy" crossorigin="anonymous" async="">
</script>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.spsanderson\.com\/steveondata\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>